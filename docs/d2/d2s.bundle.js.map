{"version":3,"sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/./src/binary/bitreader.ts","webpack://[name]/./src/binary/bitwriter.ts","webpack://[name]/./src/d2/attribute_enhancer.ts","webpack://[name]/./src/d2/attributes.ts","webpack://[name]/./src/d2/constants.ts","webpack://[name]/./src/d2/d2s.ts","webpack://[name]/./src/d2/header.ts","webpack://[name]/./src/d2/items.ts","webpack://[name]/./src/d2/skills.ts","webpack://[name]/./src/d2/types.ts","webpack://[name]/./src/d2/versions/default_header.ts","webpack://[name]/./src/data/parser.ts","webpack://[name]/./src/index.ts"],"names":[],"mappings":"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,CAAC,GAAG,EAAC,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC,EAAC,GAAG,CAAC,EAAC,CAAC,CAAC,GAAG,EAAC,GAAG,CAAC,EAAC,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,GAAG,EAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAC,GAAG,CAAC,EAAC,GAAG,CAAC,EAAC,CAAC,GAAG,EAAC,CAAC,CAAC,CAAC,GAAG,EAAC,GAAG,CAAC,EAAC,GAAG,CAAC,EAAC,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,GAAG,EAAC,GAAG,CAAC,EAAC,CAAC,GAAG,EAAC,CAAC,CAAC,GAAG,EAAC,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC,EAAC,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjP,kBAAkB;AAClB,IAAM,cAAc,GAAG,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,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","file":"d2s.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","export class BitReader {\n  public littleEndian = true;\n  public bits: Uint8Array;\n  public offset = 0;\n\n  constructor(arrBuffer: ArrayBuffer) {\n    const typedArray = new Uint8Array(arrBuffer);\n    this.bits = new Uint8Array(typedArray.length * 8);\n    typedArray.reduce((acc: number, c: number) => {\n      const b = c\n        .toString(2)\n        .padStart(8, \"0\")\n        .split(\"\")\n        .reverse()\n        .map((e) => parseInt(e, 2));\n      b.forEach((bit) => (this.bits[acc++] = bit));\n      return acc;\n    }, 0);\n  }\n\n  public ReadBit(): number {\n    return this.bits[this.offset++];\n  }\n\n  public ReadBitArray(count: number): Uint8Array {\n    const bits = new Uint8Array(count);\n    for (let i = 0; i < count; i++) {\n      bits[i] = this.bits[this.offset++];\n    }\n    return bits;\n  }\n\n  public ReadBits(bytes: Uint8Array, count: number): Uint8Array {\n    let byteIndex = 0;\n    let bitIndex = 0;\n    for (let i = 0; i < count; i++) {\n      if (this.bits[this.offset + i]) {\n        bytes[byteIndex] |= (1 << bitIndex) & 0xff;\n      }\n      bitIndex++;\n      if (bitIndex == 8) {\n        byteIndex++;\n        bitIndex = 0;\n      }\n    }\n    this.offset += count;\n    return bytes;\n  }\n\n  public ReadBytes(bytes: number): Uint8Array {\n    return this.ReadBits(new Uint8Array(bytes), bytes * 8);\n  }\n\n  public ReadArray(bytes: number): Uint8Array {\n    return this.ReadBytes(bytes);\n  }\n\n  public ReadByte(bits = 8): number {\n    const dataview = new DataView(this.ReadBits(new Uint8Array(1), bits).buffer);\n    return dataview.getUint8(0);\n  }\n\n  public ReadUInt8(bits = 8): number {\n    return this.ReadByte(bits);\n  }\n\n  public ReadUInt16(bits: number = 8 * 2): number {\n    const dataview = new DataView(this.ReadBits(new Uint8Array(2), bits).buffer);\n    return dataview.getUint16(0, this.littleEndian);\n  }\n\n  public ReadUInt32(bits: number = 8 * 4): number {\n    const dataview = new DataView(this.ReadBits(new Uint8Array(4), bits).buffer);\n    return dataview.getUint32(0, this.littleEndian);\n  }\n\n  public ReadString(bytes: number): string {\n    const buffer = this.ReadBytes(bytes).buffer;\n    return new TextDecoder().decode(buffer);\n  }\n\n  public ReadNullTerminatedString(): string {\n    const start = this.offset;\n    while (this.ReadByte()) {}\n    const end = this.offset - 8;\n    const buffer = this.SeekBit(start).ReadBytes((end - start) / 8);\n    this.SeekBit(end + 8);\n    return new TextDecoder().decode(buffer);\n  }\n\n  public SkipBits(number: number): BitReader {\n    this.offset += number;\n    return this;\n  }\n\n  public SkipBytes(number: number): BitReader {\n    return this.SkipBits(number * 8);\n  }\n\n  public SeekBit(offset: number): BitReader {\n    this.offset = offset;\n    return this;\n  }\n\n  public SeekByte(offset: number): BitReader {\n    return this.SeekBit(offset * 8);\n  }\n\n  public Align(): BitReader {\n    this.offset = (this.offset + 7) & ~7;\n    return this;\n  }\n}\n","export class BitWriter {\n  public littleEndian = true;\n  public bits: Uint8Array;\n  public offset = 0;\n  public length = 0;\n\n  constructor(capacity = 8192) {\n    this.bits = new Uint8Array(capacity);\n  }\n\n  public WriteBit(value: number): BitWriter {\n    if (this.offset >= this.bits.length) {\n      const resized = new Uint8Array(this.bits.length + 8192);\n      resized.set(this.bits, 0);\n      this.bits = resized;\n    }\n    this.bits[this.offset++] = value;\n    if (this.offset > this.length) this.length++;\n    return this;\n  }\n\n  public WriteBits(bits: Uint8Array, numberOfBits: number): BitWriter {\n    for (let i = 0; i < numberOfBits; i++) {\n      this.WriteBit(bits[i]);\n    }\n    return this;\n  }\n\n  public WriteBytes(bytes: Uint8Array, numberOfBits: number = bytes.length * 8): BitWriter {\n    const toWrite = new Uint8Array(numberOfBits);\n    bytes.reduce((acc, c) => {\n      const b = c\n        .toString(2)\n        .padStart(8, \"0\")\n        .split(\"\")\n        .reverse()\n        .map((e) => parseInt(e, 2));\n      b.forEach((bit) => (toWrite[acc++] = bit));\n      return acc;\n    }, 0);\n    return this.WriteBits(toWrite, numberOfBits);\n  }\n\n  public WriteArray(bytes: Uint8Array, numberOfBits: number = bytes.length * 8): BitWriter {\n    return this.WriteBytes(bytes, numberOfBits);\n  }\n\n  public WriteByte(value: number, numberOfBits = 8): BitWriter {\n    const buffer = new Uint8Array(1);\n    new DataView(buffer.buffer).setUint8(0, value);\n    return this.WriteBytes(buffer, numberOfBits);\n  }\n\n  public WriteUInt8(value: number, numberOfBits = 8): BitWriter {\n    return this.WriteByte(value, numberOfBits);\n  }\n\n  public WriteUInt16(value: number, numberOfBits: number = 8 * 2): BitWriter {\n    const buffer = new Uint8Array(2);\n    new DataView(buffer.buffer).setUint16(0, value, this.littleEndian);\n    return this.WriteBytes(buffer, numberOfBits);\n  }\n\n  public WriteUInt32(value: number, numberOfBits: number = 8 * 4): BitWriter {\n    const buffer = new Uint8Array(4);\n    new DataView(buffer.buffer).setUint32(0, value, this.littleEndian);\n    return this.WriteBytes(buffer, numberOfBits);\n  }\n\n  public WriteString(value: string, numberOfBytes: number): BitWriter {\n    const buffer = new TextEncoder().encode(value);\n    return this.WriteBytes(buffer, numberOfBytes * 8);\n  }\n\n  public SeekBit(offset: number): BitWriter {\n    this.offset = offset;\n    if (this.offset > this.length) {\n      this.length = this.offset;\n    }\n    return this;\n  }\n\n  public SeekByte(offset: number): BitWriter {\n    return this.SeekBit(offset * 8);\n  }\n\n  public PeekBytes(count: number): Uint8Array {\n    const buffer = new Uint8Array(count);\n    let byteIndex = 0;\n    let bitIndex = 0;\n    for (let i = 0; i < count * 8; ++i) {\n      if (this.bits[this.offset + i]) {\n        buffer[byteIndex] |= (1 << bitIndex) & 0xff;\n      }\n      ++bitIndex;\n      if (bitIndex >= 8) {\n        ++byteIndex;\n        bitIndex = 0;\n      }\n    }\n    return buffer;\n  }\n\n  public Align(): BitWriter {\n    this.offset = (this.offset + 7) & ~7;\n    if (this.offset > this.length) {\n      this.length = this.offset;\n    }\n    return this;\n  }\n\n  public ToArray(): Uint8Array {\n    const buffer = new Uint8Array((this.length - 1) / 8 + 1);\n    let byteIndex = 0;\n    let bitIndex = 0;\n    for (let i = 0; i < this.length; ++i) {\n      if (this.bits[i]) {\n        buffer[byteIndex] |= (1 << bitIndex) & 0xff;\n      }\n      ++bitIndex;\n      if (bitIndex >= 8) {\n        ++byteIndex;\n        bitIndex = 0;\n      }\n    }\n    return buffer;\n  }\n}\n","import * as types from \"./types\";\r\nimport statGroups from \"../data/ItemStatGroups.json\";\r\n\r\n//do nice stuff\r\n//combine group properties (all resists/all stats) and build friendly strings for a ui\r\n//enhanced def/durability/weapon damage.\r\n//lookup socketed compact items (runes/gems) properties for the slot they are in\r\n//compute attributes like str/resists/etc..\r\nexport async function enhanceAttributes(char: types.ID2S, constants: types.IConstantData, config?: types.IConfig) {\r\n  enhanceItems(char.items, constants, char.attributes.level, config);\r\n  enhanceItems([char.golem_item], constants, char.attributes.level, config);\r\n  enhanceItems(char.merc_items, constants, char.attributes.level, config);\r\n  enhanceItems(char.corpse_items, constants, char.attributes.level, config);\r\n  enhancePlayerAttributes(char, constants, config);\r\n}\r\n\r\nexport async function enhancePlayerAttributes(char: types.ID2S, constants: types.IConstantData, config?: types.IConfig) {\r\n  const items = char.items.filter((item) => {\r\n    return item.location_id === 1 && item.equipped_id !== 13 && item.equipped_id !== 14;\r\n  });\r\n\r\n  char.item_bonuses = ([] as types.IMagicProperty[]).concat\r\n    .apply(\r\n      [],\r\n      items.map((item) => _allAttributes(item, constants))\r\n    )\r\n    .filter((attribute) => attribute != null);\r\n  //char.item_bonuses = _groupAttributes(char.item_bonuses, constants);\r\n  _enhanceAttributeDescription(char.item_bonuses, constants, char.attributes.level, config);\r\n}\r\n\r\nexport async function enhanceItems(\r\n  items: types.IItem[],\r\n  constants: types.IConstantData,\r\n  level = 1,\r\n  config?: types.IConfig,\r\n  parent?: types.IItem\r\n) {\r\n  if (!items) {\r\n    return;\r\n  }\r\n  for (const item of items) {\r\n    if (!item) {\r\n      continue;\r\n    }\r\n    if (item.socketed_items && item.socketed_items.length) {\r\n      enhanceItems(item.socketed_items, constants, level, config, item);\r\n    }\r\n    enhanceItem(item, constants, level, config, parent);\r\n  }\r\n}\r\n\r\nexport function enhanceItem(item: types.IItem, constants: types.IConstantData, level = 1, config?: types.IConfig, parent?: types.IItem) {\r\n  if (parent) {\r\n    //socket item.\r\n    const pt = constants.armor_items[parent.type] || constants.weapon_items[parent.type] || constants.other_items[item.type];\r\n    const t = constants.other_items[item.type];\r\n    if (t.m) {\r\n      item.magic_attributes = compactAttributes(t.m[pt.gt], constants);\r\n    }\r\n  }\r\n\r\n  item.level = boundValue(item.level, 1, 99);\r\n  // Ensure coherence of other attributes with quality\r\n  if (item.given_runeword) {\r\n      item.runeword_name = constants.runewords[item.runeword_id] ? constants.runewords[item.runeword_id].n : \"\";\r\n      if (item.quality > types.Quality.Superior) {\r\n          // Cannot be a runeword\r\n          item.given_runeword = 0;\r\n          item.runeword_id = 0;\r\n          item.runeword_name = \"\";\r\n          item.runeword_attributes = [];\r\n      }\r\n  }\r\n  if (item.quality !== types.Quality.Magic) {\r\n      item.magic_prefix = 0;\r\n      item.magic_suffix = 0;\r\n  }\r\n  if (item.quality === types.Quality.Rare || item.quality === types.Quality.Crafted) {\r\n      item.rare_name = constants.rare_names[item.rare_name_id] ? constants.rare_names[item.rare_name_id].n : \"\";\r\n      item.rare_name2 = constants.rare_names[item.rare_name_id2] ? constants.rare_names[item.rare_name_id2].n : \"\";\r\n  }\r\n  else {\r\n      item.rare_name_id = 0;\r\n      item.rare_name = \"\";\r\n      item.rare_name_id2 = 0;\r\n      item.rare_name2 = \"\";\r\n      item.magical_name_ids = [0, 0, 0, 0, 0, 0];\r\n  }\r\n  if (item.quality === types.Quality.Set) {\r\n      item.set_name = constants.set_items[item.set_id] ? constants.set_items[item.set_id].n : \"\";\r\n  }\r\n  else {\r\n      item.set_id = 0;\r\n      item.set_name = \"\";\r\n      item.set_attributes = [];\r\n  }\r\n  if (item.quality === types.Quality.Unique) {\r\n      item.unique_name = constants.unq_items[item.unique_id] ? constants.unq_items[item.unique_id].n : \"\";\r\n  }\r\n  else {\r\n      item.unique_id = 0;\r\n      item.unique_name = \"\";\r\n  }\r\n  if (item.quality !== types.Quality.Magic && item.quality !== types.Quality.Unique) {\r\n      item.personalized = 0;\r\n      item.personalized_name = \"\";\r\n  }\r\n\r\n  let details = null;\r\n  if (constants.armor_items[item.type]) {\r\n    details = constants.armor_items[item.type];\r\n    item.type_id = types.ItemType.Armor;\r\n    if (details.maxac) {\r\n      if (item.ethereal == 0) {\r\n        item.defense_rating = details.maxac;\r\n      } else if (item.ethereal == 1) {\r\n        item.defense_rating = Math.floor(details.maxac * 1.5);\r\n      }\r\n    }\r\n  } else if (constants.weapon_items[item.type]) {\r\n    details = constants.weapon_items[item.type];\r\n    item.type_id = types.ItemType.Weapon;\r\n    const base_damage = {} as types.IWeaponDamage;\r\n    if (item.ethereal == 0) {\r\n      if (details.mind) base_damage.mindam = details.mind;\r\n      if (details.maxd) base_damage.maxdam = details.maxd;\r\n      if (details.min2d) base_damage.twohandmindam = details.min2d;\r\n      if (details.max2d) base_damage.twohandmaxdam = details.max2d;\r\n    } else if (item.ethereal == 1) {\r\n      if (details.mind) base_damage.mindam = Math.floor(details.mind * 1.5);\r\n      if (details.maxd) base_damage.maxdam = Math.floor(details.maxd * 1.5);\r\n      if (details.min2d) base_damage.twohandmindam = Math.floor(details.min2d * 1.5);\r\n      if (details.max2d) base_damage.twohandmaxdam = Math.floor(details.max2d * 1.5);\r\n    }\r\n    item.base_damage = base_damage;\r\n  } else if (constants.other_items[item.type]) {\r\n    item.type_id = types.ItemType.Other;\r\n    details = constants.other_items[item.type];\r\n  }\r\n  if (details) {\r\n    if (details.n) item.type_name = details.n;\r\n    if (details.rs) item.reqstr = details.rs;\r\n    if (details.rd) item.reqdex = details.rd;\r\n    if (details.i) item.inv_file = details.i;\r\n    if (details.ih) item.inv_height = details.ih;\r\n    if (details.iw) item.inv_width = details.iw;\r\n    if (details.it) item.inv_transform = details.it;\r\n    if (details.iq) item.item_quality = details.iq;\r\n    if (details.c) item.categories = details.c;\r\n    if (details.durability) {\r\n      if (item.ethereal == 0) {\r\n        item.current_durability = details.durability;\r\n        item.max_durability = details.durability;\r\n      } else if (item.ethereal == 1) {\r\n        item.current_durability = details.durability - Math.ceil(details.durability / 2) + 1;\r\n        item.max_durability = details.durability - Math.ceil(details.durability / 2) + 1;\r\n      }\r\n    }\r\n    // Enforce coherence between total_nr_of_sockets & socketed\r\n    if (item.total_nr_of_sockets > 0) {\r\n      item.socketed = 1;\r\n    } else {\r\n      item.socketed = 0;\r\n    }\r\n    if (item.multiple_pictures) {\r\n      item.inv_file = details.ig[item.picture_id];\r\n    }\r\n    if (item.magic_prefix || item.magic_suffix) {\r\n      if (item.magic_prefix && constants.magic_prefixes[item.magic_prefix]?.tc) {\r\n        item.transform_color = constants.magic_prefixes[item.magic_prefix].tc;\r\n      }\r\n      if (item.magic_suffix && constants.magic_suffixes[item.magic_suffix]?.tc) {\r\n        item.transform_color = constants.magic_suffixes[item.magic_suffix].tc;\r\n      }\r\n    } else if (item.magical_name_ids && item.magical_name_ids.length === 6) {\r\n      for (let i = 0; i < 6; i++) {\r\n        const id = item.magical_name_ids[i];\r\n        if (id) {\r\n          if (i % 2 == 0 && constants.magic_prefixes[id] && constants.magic_prefixes[id]?.tc) {\r\n            // even is prefixes\r\n            item.transform_color = constants.magic_prefixes[id].tc;\r\n          } else if (constants.magic_suffixes[id] && constants.magic_suffixes[id]?.tc) {\r\n            // odd is suffixes\r\n            item.transform_color = constants.magic_suffixes[id].tc;\r\n          }\r\n        }\r\n      }\r\n    } else if (item.unique_id) {\r\n      const unq = constants.unq_items[item.unique_id];\r\n      if (details.ui) item.inv_file = details.ui;\r\n      if (unq && unq.i) item.inv_file = unq.i;\r\n      if (unq && unq.tc) item.transform_color = unq.tc;\r\n    } else if (item.set_id) {\r\n      const set = constants.set_items[item.set_id];\r\n      if (details.ui) item.inv_file = details.ui;\r\n      if (set && set.i) item.inv_file = set.i;\r\n      if (set && set.tc) item.transform_color = set.tc;\r\n    }\r\n  }\r\n\r\n  if (item.magic_attributes || item.runeword_attributes || item.socketed_items) {\r\n    item.displayed_magic_attributes = _enhanceAttributeDescription(item.magic_attributes, constants, level, config);\r\n    item.displayed_runeword_attributes = _enhanceAttributeDescription(item.runeword_attributes, constants, level, config);\r\n    item.combined_magic_attributes = _allAttributes(item, constants);\r\n    item.displayed_combined_magic_attributes = _enhanceAttributeDescription(item.combined_magic_attributes, constants, level, config);\r\n  }\r\n}\r\n\r\nexport function compactAttributes(mods: any[], constants: types.IConstantData): types.IMagicProperty[] {\r\n  const magic_attributes = [] as types.IMagicProperty[];\r\n  for (const mod of mods) {\r\n    for (const stat of constants.properties[mod.prop] || []) {\r\n      const statId = constants.magical_properties.findIndex((e) => e.s === stat.s)\r\n      const prop = constants.magical_properties[statId];\r\n      if (prop) {\r\n        //if (prop.np) continue;\r\n        let v = [mod.min, mod.max];\r\n        switch (prop.dF) {\r\n          //item_addclassskills\r\n          case 13: {\r\n            v = [stat.val, mod.max];\r\n            break;\r\n          }\r\n          //item_addskill_tab\r\n          case 14: {\r\n            //TODO +skill to skilltab\r\n            //v = [mod.p & 7, (mod.p >> 3) * 3, mod.min];\r\n            v = [Math.abs(Math.round(mod.p / 3) - 3), Math.floor(mod.p / 3), mod.min];\r\n            break;\r\n          }\r\n          //item_skillon\r\n          case 15: {\r\n            v = [mod.max, mod.p, mod.min];\r\n            break;\r\n          }\r\n          //item_aura\r\n          case 16: {\r\n            v = [mod.p, mod.max];\r\n            break;\r\n          }\r\n          //charged_skill\r\n          case 24: {\r\n            v = [mod.max, mod.p, mod.min, mod.min];\r\n            break;\r\n          }\r\n          //item_singleskill\r\n          case 27: {\r\n            v = [mod.p, mod.max];\r\n            if (mod.prop == \"skill-rand\") {\r\n              const rnd = Math.floor(Math.random() * (mod.max - mod.min) + mod.min);\r\n              v = [constants.skills[rnd]?.id, mod.p];\r\n            }            \r\n            break;\r\n          }\r\n          //item_nonclassskill\r\n          case 28: {\r\n            v = [mod.p, mod.max];\r\n            break;\r\n          }\r\n          default: \r\n            break;\r\n        }\r\n        if (prop.s == \"poisonmindam\" || prop.s == \"poisonmaxdam\" || prop.s == \"poisonlength\") {\r\n          v = [mod.min, mod.max, mod.p];\r\n        }\r\n\r\n        magic_attributes.push({\r\n          id: statId,\r\n          name: prop.s,\r\n          values: v,\r\n          param: mod.p,\r\n          value: mod.max,\r\n          df: prop.dF,\r\n          //so: prop.so,\r\n        } as types.IMagicProperty);\r\n      }  \r\n    }\r\n  }\r\n  return magic_attributes;\r\n}\r\n\r\nfunction _enhanceAttributeDescription(\r\n  _magic_attributes: types.IMagicProperty[],\r\n  constants: types.IConstantData,\r\n  level = 1,\r\n  config?: types.IConfig\r\n): types.IMagicProperty[] {\r\n  if (!_magic_attributes) return [];\r\n  const mods: types.IMagicProperty[] = [..._magic_attributes.map((attr) => ({ ...attr }))];\r\n  \r\n  for (const mod of mods) {\r\n    const prop = constants.magical_properties[mod.id];\r\n      mod.value = mod.values[mod.values?.length - 1];\r\n      mod.param = mod.values[0];\r\n      //mod.so = prop.so;\r\n  }\r\n\r\n  consolidateMods(mods);\r\n\r\n  for (const mod of mods) {\r\n    const prop = constants.magical_properties[mod.id];\r\n      mod.description = describeSingleMod(mod, prop, constants);\r\n  }\r\n \r\n  addModGroups(mods, constants);\r\n  \r\n  if (config?.sortProperties) {\r\n    mods.sort((a, b) => \r\n      constants.magical_properties[b.id]?.so - constants.magical_properties[a.id]?.so \r\n    );\r\n  }\r\n  return mods;\r\n}\r\n\r\nfunction describeSingleMod(\r\n  mod: any,\r\n  prop: any,\r\n  constants: types.IConstantData,\r\n) {\r\n  if (!prop) return;\r\n  let val = mod.value;\r\n  if (prop.s.endsWith(\"perlevel\")) {\r\n    // Per-level mod, we show it for character level 99 for the flair\r\n    if (prop.s.includes(\"tohit\")) {\r\n      val = val! / 2;\r\n    } else {\r\n      val = val! / 8;\r\n    }\r\n    val = Math.floor(99 * val);\r\n  }\r\n  \r\n  let modDesc = (val ?? 0) < 0 ? prop.dN : prop.dP;\r\n  if (prop.id == 39 || prop.id == 41 || prop.id == 43 || prop.id == 45) {\r\n    modDesc = prop.dP;\r\n  }\r\n  let valueDesc: string | undefined;\r\n  switch (prop.dF) {\r\n    case 1: case 6: case 12:\r\n      valueDesc = (val ?? 0) < 0 ? `${val}` : `+${val}`;\r\n      break;\r\n    case 2: case 7:\r\n      valueDesc = `${val}%`;\r\n      break;\r\n    case 3: case 9:\r\n      valueDesc = `${val}`;\r\n      break;\r\n    case 4: case 8:\r\n      valueDesc = (val ?? 0) < 0 ? `${val}%` : `+${val}%`;\r\n      break;\r\n    case 5: case 10: \r\n      valueDesc = `${Math.floor((val! * 100) / 128)}%`;\r\n      break;\r\n    case 11:\r\n      modDesc = modDesc.replace(\"%d\", `${100 / val!}`);\r\n      break;\r\n    case 13:  // +[value] to [class] Skill Levels\r\n      modDesc = formatStr(constants.classes[mod.values[0]!].as, val);\r\n      break;\r\n    case 14:  // +[value] to [skilltab] Skill Levels ([class] Only)\r\n      const skillTab = constants.classes[mod.values[1]].ts[mod.values[0]];\r\n      if (skillTab) {\r\n        modDesc = `+${val} to ${skillTab} ${constants.classes[mod.values[1]].co}`;\r\n        modDesc = formatStr(skillTab, val) + \" \" + constants.classes[mod.values[1]].co;\r\n      }\r\n      break;\r\n    case 15:  // [chance]% to cast [slvl] [skill] on [event]\r\n      modDesc = modDesc\r\n        // Extra % because the actual one is doubled to escape it\r\n        .replace(\"%d%\", `${mod.values[2]}`)\r\n        .replace(\"%d\", `${mod.values[0]}`)\r\n        .replace(\"%s\", `${constants.skills[mod.values[1]!].n}`);\r\n      break;\r\n    case 16: // Level [sLvl] [skill] Aura When Equipped\r\n      modDesc = modDesc\r\n        .replace(\"%d\", `${val}`)\r\n        .replace(\"%s\", `${constants.skills[mod.values[0]!].n}`);\r\n      break;\r\n    case 19: //main\r\n      modDesc = formatStr(modDesc, val);\r\n      break;\r\n    case 20:\r\n      valueDesc = `${-val!}%`;\r\n      break;\r\n    case 21:\r\n      valueDesc = `${-val!}`;\r\n      break;\r\n    case 22:  // [value]% / [montype]\r\n      valueDesc = `${val}%`;\r\n      break;\r\n    case 23:  // [value]% / [montype]\r\n      valueDesc = `${val}%`;\r\n      modDesc = formatStr(modDesc, val)\r\n      break;\r\n    case 24: // charges\r\n      modDesc = formatStr(modDesc, mod.values[0], constants.skills[mod.values[1]].n, mod.values[2], mod.values[3]);\r\n      break;\r\n    case 27: // +[value] to [skill] ([class] Only)\r\n      const skill = constants.skills[mod.values[0]];\r\n      modDesc = formatStr(modDesc, val, skill?.n, constants.classes.filter((e) => e?.c === skill?.c)[0]?.co);\r\n      break;\r\n    case 28: // +[value] to [skill]\r\n      modDesc = formatStr(modDesc, val, constants.skills[mod.values[0]]?.n);\r\n      break;\r\n    // Custom describe functions to handle groups\r\n    case 100:\r\n      // Non-poison elemental or magic damage.\r\n      if (mod.values?.[0] !== mod.values?.[1]) {\r\n        modDesc = prop.dN;\r\n      }\r\n      modDesc = modDesc\r\n        .replace(\"%d\", `${mod.values?.[0]}`)\r\n        .replace(\"%d\", `${mod.values?.[1]}`);\r\n      break;\r\n    case 101: // Poison damage\r\n      if (mod.values?.[0] === mod.values?.[1]) {\r\n        modDesc = modDesc\r\n          .replace( \"%d\", `${Math.round((mod.values![0] * mod.values![2]) / 256)}`)\r\n          .replace(\"%d\", `${Math.round(mod.values![2] / 25)}`);\r\n      } else {\r\n        modDesc = prop.dN\r\n          .replace(\"%d\", `${Math.round((mod.values![0] * mod.values![2]) / 256)}`)\r\n          .replace(\"%d\", `${Math.round((mod.values![1] * mod.values![2]) / 256)}`)\r\n          .replace(\"%d\", `${Math.round(mod.values![2] / 25)}`);\r\n      }\r\n      break;\r\n  }\r\n\r\n  if (modDesc) {\r\n    let fullDesc = \"\";\r\n    switch (prop.dV) {\r\n      case 1:\r\n        fullDesc = `${valueDesc} ${modDesc}`;\r\n        break;\r\n      case 2:\r\n        fullDesc = `${modDesc} ${valueDesc}`;\r\n        break;\r\n      default:\r\n        fullDesc = modDesc;\r\n    }\r\n    if (6 <= prop.dF && prop.dF <= 9) {\r\n      fullDesc += ` ${prop.d2}`;\r\n    }\r\n  \r\n    return fullDesc;\r\n  }\r\n}\r\n\r\nfunction addModGroups(\r\n  modifiers: types.IMagicProperty[],\r\n  constants: types.IConstantData\r\n  ) {\r\n  for (const group of statGroups) {\r\n    const mods = modifiers?.filter(({ id }) => group.statsInGroup.includes(id)) ?? [];\r\n    // We assume a mods have been merged so we cannot have duplicates\r\n    if (mods.length !== group.statsInGroup.length) {\r\n      continue;\r\n    }\r\n    if (group.allEqual && mods.some(({ value }) => value !== mods[0].value)) {\r\n      continue;\r\n    }\r\n    // On some rare items we can get increase in min damage that's larger than the increase in max damage.\r\n    // The game solves this by displaying them separately.\r\n    if (group.isRange && (mods[0].value ?? 0) > (mods[1].value ?? 0)) {\r\n      continue;\r\n    }\r\n    // Damage increase on non-weapons is awkward, it has all 4 mods that apply in the multiple groups.\r\n    if (\r\n      group.s === \"group:secondary-dmg\" ||\r\n      group.s === \"group:min-dmg\" ||\r\n      group.s === \"group:max-dmg\"\r\n    ) {\r\n      // We already described the range, ignore these \"duplicate\" groups\r\n      if (modifiers?.find((mod) => mod.name === \"group:primary-dmg\")) {\r\n        // We still have to remember to delete the description from the mods,\r\n        // primary-dmg only contains 2, not all 4.\r\n        for (const mod of mods) {\r\n          delete mod.description;\r\n        }\r\n        continue;\r\n      }\r\n    }\r\n\r\n    const extraMod: types.IMagicProperty = {\r\n      id: -1,\r\n      name: group.s,\r\n      so: group.so,\r\n      df: group.dF,\r\n      value: mods[0].value,\r\n      //value: group.allEqual ? mods[0].value : undefined,\r\n      values: mods.map(({ value }) => value ?? 0),\r\n    };\r\n    extraMod.description = describeSingleMod(extraMod, group, constants);\r\n    modifiers?.push(extraMod);\r\n\r\n    // Clear descriptions of items in group so they are not displayed\r\n    for (const mod of mods) {\r\n      delete mod.description;\r\n    }\r\n  }\r\n}\r\n\r\nfunction formatStr(str: string, ...values: any[]) {\r\n  let i = 0;\r\n  return str?.replace(/%(\\+)?([ids%\\d])/g, (m, plus, chr) => {\r\n    if (chr === '%') {\r\n      return chr;\r\n    } else {\r\n      let value = (chr === 'd' || chr === 's' || chr === 'i' ? values[i++] : values[chr]);\r\n      if (plus && !isNaN(value) && parseInt(value) > 0) value = '+' + value;\r\n      return value;\r\n    }\r\n  });\r\n}\r\n\r\nfunction consolidateMods(mods: types.IMagicProperty[]) {\r\n  for (const mod of mods) {\r\n    let duplicateIndex: number | undefined;\r\n    while (\r\n      (duplicateIndex = mods.findIndex(\r\n        (other) => mod !== other && \r\n        (mod.id === other.id && \"value\" in mod && mod.param === other.param)\r\n      )) >= 0\r\n    ) {\r\n      const [duplicate] = mods.splice(duplicateIndex, 1);\r\n      mod.value = (mod.value ?? 0) + (duplicate.value ?? 0);\r\n    }\r\n  }\r\n}\r\n\r\nfunction boundValue(v: number, min: number, max: number) {\r\n  return Math.min(max, Math.max(min, v));\r\n}\r\n\r\nfunction _itemStatCostFromStat(stat: string, constants: types.IConstantData): number {\r\n  return constants.magical_properties.findIndex((e) => e.s === stat);\r\n}\r\n\r\nfunction _classFromCode(code: string, constants: types.IConstantData): any {\r\n  return constants.classes.filter((e) => e.c === code)[0];\r\n}\r\n\r\nfunction _allAttributes(item: types.IItem, constants: types.IConstantData): types.IMagicProperty[] {\r\n  let socketed_attributes = [] as types.IMagicProperty[];\r\n  if (item.socketed_items) {\r\n    for (const i of item.socketed_items) {\r\n      if (i.magic_attributes) {\r\n        socketed_attributes = socketed_attributes.concat(...JSON.parse(JSON.stringify(i.magic_attributes)));\r\n      }\r\n    }\r\n  }\r\n  const magic_attributes = item.magic_attributes || [];\r\n  const runeword_attributes = item.runeword_attributes || [];\r\n  return [\r\n    ...[],\r\n    ...JSON.parse(JSON.stringify(magic_attributes)),\r\n    ...JSON.parse(JSON.stringify(runeword_attributes)),\r\n    ...JSON.parse(JSON.stringify(socketed_attributes)),\r\n  ].filter((attribute) => attribute != null);\r\n}","import * as types from \"./types\";\r\nimport { BitReader } from \"../binary/bitreader\";\r\nimport { BitWriter } from \"../binary/bitwriter\";\r\n\r\n//todo use constants.magical_properties and csvBits\r\nexport async function readAttributes(char: types.ID2S, reader: BitReader, constants: types.IConstantData) {\r\n  char.attributes = {} as types.IAttributes;\r\n  const header = reader.ReadString(2); //0x0000 [attributes header = 0x67, 0x66 \"gf\"]\r\n  if (header != \"gf\") {\r\n    // header is not present in first save after char is created\r\n    if (char.header.level === 1) {\r\n      const classData = constants.classes.find((c) => c.n === char.header.class).a;\r\n\r\n      char.attributes = {\r\n        strength: +classData.str,\r\n        energy: +classData.int,\r\n        dexterity: +classData.dex,\r\n        vitality: +classData.vit,\r\n        unused_stats: 0,\r\n        unused_skill_points: 0,\r\n        current_hp: +classData.vit + +classData.hpadd,\r\n        max_hp: +classData.vit + +classData.hpadd,\r\n        current_mana: +classData.int,\r\n        max_mana: +classData.int,\r\n        current_stamina: +classData.stam,\r\n        max_stamina: +classData.stam,\r\n        level: 1,\r\n        experience: 0,\r\n        gold: 0,\r\n        stashed_gold: 0,\r\n      };\r\n\r\n      return;\r\n    }\r\n\r\n    throw new Error(`Attribute header 'gf' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  let bitoffset = 0;\r\n  let id = reader.ReadUInt16(9);\r\n  //read till 0x1ff end of attributes is found\r\n  while (id != 0x1ff) {\r\n    bitoffset += 9;\r\n    const field = constants.magical_properties[id];\r\n    if (field === undefined) {\r\n      throw new Error(`Invalid attribute id: ${id}`);\r\n    }\r\n    const size = field.cB;\r\n    char.attributes[Attributes[field.s]] = reader.ReadUInt32(size);\r\n    //current_hp - max_stamina need to be bit shifted\r\n    if (id >= 6 && id <= 11) {\r\n      char.attributes[Attributes[field.s]] >>>= 8;\r\n    }\r\n    bitoffset += size;\r\n    id = reader.ReadUInt16(9);\r\n  }\r\n\r\n  reader.Align();\r\n}\r\n\r\nexport async function writeAttributes(char: types.ID2S, constants: types.IConstantData): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"gf\", 2); //0x0000 [attributes header = 0x67, 0x66 \"gf\"]\r\n  for (let i = 0; i < 16; i++) {\r\n    const property = constants.magical_properties[i];\r\n    if (property === undefined) {\r\n      throw new Error(`Invalid attribute: ${property}`);\r\n    }\r\n    let value = char.attributes[Attributes[property.s]];\r\n    if (!value) {\r\n      continue;\r\n    }\r\n    const size = property.cB;\r\n    if (i >= 6 && i <= 11) {\r\n      value <<= 8;\r\n    }\r\n    writer.WriteUInt16(i, 9);\r\n    writer.WriteUInt32(value, size);\r\n  }\r\n  writer.WriteUInt16(0x1ff, 9);\r\n  writer.Align();\r\n  return writer.ToArray();\r\n}\r\n\r\n//nokkas names\r\nconst Attributes = {\r\n  strength: \"strength\",\r\n  energy: \"energy\",\r\n  dexterity: \"dexterity\",\r\n  vitality: \"vitality\",\r\n  statpts: \"unused_stats\",\r\n  newskills: \"unused_skill_points\",\r\n  hitpoints: \"current_hp\",\r\n  maxhp: \"max_hp\",\r\n  mana: \"current_mana\",\r\n  maxmana: \"max_mana\",\r\n  stamina: \"current_stamina\",\r\n  maxstamina: \"max_stamina\",\r\n  level: \"level\",\r\n  experience: \"experience\",\r\n  gold: \"gold\",\r\n  goldbank: \"stashed_gold\",\r\n};\r\n","import * as types from \"./types\";\r\n\r\nconst versionedConstants: Map<number, types.IConstantData> = new Map<number, types.IConstantData>();\r\n\r\nfunction getConstantData(version: number): types.IConstantData {\r\n  if (!(version in versionedConstants)) {\r\n    throw new Error(`No constant data found for this version ${version}`);\r\n  }\r\n  return versionedConstants[version];\r\n}\r\n\r\nfunction setConstantData(version: number, data: types.IConstantData) {\r\n  versionedConstants[version] = data;\r\n}\r\n\r\nexport { getConstantData, setConstantData };\r\n","import * as types from \"./types\";\r\nimport { readHeader, readHeaderData, writeHeader, writeHeaderData, fixHeader } from \"./header\";\r\nimport { readAttributes, writeAttributes } from \"./attributes\";\r\nimport { BitReader } from \"../binary/bitreader\";\r\nimport { BitWriter } from \"../binary/bitwriter\";\r\nimport { readSkills, writeSkills } from \"./skills\";\r\nimport * as items from \"./items\";\r\nimport { getConstantData } from \"./constants\";\r\nimport { enhanceAttributes, enhanceItems } from \"./attribute_enhancer\";\r\n\r\nconst defaultConfig = {\r\n  extendedStash: false,\r\n  sortProperties: true,\r\n} as types.IConfig;\r\n\r\nfunction reader(buffer: Uint8Array) {\r\n  return new BitReader(buffer);\r\n}\r\n\r\nasync function read(buffer: Uint8Array, constants?: types.IConstantData, userConfig?: types.IConfig): Promise<types.ID2S> {\r\n  const char = {} as types.ID2S;\r\n  const reader = new BitReader(buffer);\r\n  const config = Object.assign(defaultConfig, userConfig);\r\n  await readHeader(char, reader);\r\n  //could load constants based on version here\r\n  if (!constants) {\r\n    constants = getConstantData(char.header.version);\r\n  }\r\n  await readHeaderData(char, reader, constants);\r\n  await readAttributes(char, reader, constants);\r\n  await readSkills(char, reader, constants);\r\n  await items.readCharItems(char, reader, constants, config);\r\n  await items.readCorpseItems(char, reader, constants, config);\r\n  if (char.header.status.expansion) {\r\n    await items.readMercItems(char, reader, constants, config);\r\n    await items.readGolemItems(char, reader, constants, config);\r\n  }\r\n  await enhanceAttributes(char, constants, config);\r\n  return char;\r\n}\r\n\r\nasync function readItem(\r\n  buffer: Uint8Array,\r\n  version: number,\r\n  constants?: types.IConstantData,\r\n  userConfig?: types.IConfig\r\n): Promise<types.IItem> {\r\n  const reader = new BitReader(buffer);\r\n  const config = Object.assign(defaultConfig, userConfig);\r\n  if (!constants) {\r\n    constants = getConstantData(version);\r\n  }\r\n  const item = await items.readItem(reader, version, constants, config);\r\n  await enhanceItems([item], constants);\r\n  return item;\r\n}\r\n\r\nfunction writer(buffer: Uint8Array) {\r\n  return new BitWriter();\r\n}\r\n\r\nasync function write(data: types.ID2S, constants?: types.IConstantData, userConfig?: types.IConfig): Promise<Uint8Array> {\r\n  const config = Object.assign(defaultConfig, userConfig);\r\n  const writer = new BitWriter();\r\n  writer.WriteArray(await writeHeader(data));\r\n  if (!constants) {\r\n    constants = getConstantData(data.header.version);\r\n  }\r\n  writer.WriteArray(await writeHeaderData(data, constants));\r\n  writer.WriteArray(await writeAttributes(data, constants));\r\n  writer.WriteArray(await writeSkills(data, constants));\r\n  writer.WriteArray(await items.writeCharItems(data, constants, config));\r\n  writer.WriteArray(await items.writeCorpseItem(data, constants, config));\r\n  if (data.header.status.expansion) {\r\n    writer.WriteArray(await items.writeMercItems(data, constants, config));\r\n    writer.WriteArray(await items.writeGolemItems(data, constants, config));\r\n  }\r\n  await fixHeader(writer);\r\n  return writer.ToArray();\r\n}\r\n\r\nasync function writeItem(\r\n  item: types.IItem,\r\n  version: number,\r\n  constants?: types.IConstantData,\r\n  userConfig?: types.IConfig\r\n): Promise<Uint8Array> {\r\n  const config = Object.assign(defaultConfig, userConfig);\r\n  const writer = new BitWriter();\r\n  if (!constants) {\r\n    constants = getConstantData(version);\r\n  }\r\n  writer.WriteArray(await items.writeItem(item, version, constants, config));\r\n  return writer.ToArray();\r\n}\r\n\r\nexport { reader, writer, read, write, readItem, writeItem };\r\n","import * as types from \"./types\";\r\nimport { BitReader } from \"../binary/bitreader\";\r\nimport { BitWriter } from \"../binary/bitwriter\";\r\n\r\nexport async function readHeader(char: types.ID2S, reader: BitReader) {\r\n  char.header = {} as types.IHeader;\r\n  //0x0000\r\n  char.header.identifier = reader.ReadUInt32().toString(16).padStart(8, \"0\");\r\n  if (char.header.identifier != \"aa55aa55\") {\r\n    throw new Error(`D2S identifier 'aa55aa55' not found at position ${reader.offset - 4 * 8}`);\r\n  }\r\n  //0x0004\r\n  char.header.version = reader.ReadUInt32();\r\n}\r\n\r\nexport async function readHeaderData(char: types.ID2S, reader: BitReader, constants: types.IConstantData) {\r\n  const v = await _versionSpecificHeader(char.header.version);\r\n  if (v == null) {\r\n    throw new Error(`Cannot parse version: ${char.header.version}`);\r\n  }\r\n  v.readHeader(char, reader, constants);\r\n}\r\n\r\nexport async function writeHeader(char: types.ID2S): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteUInt32(parseInt(char.header.identifier, 16)).WriteUInt32(char.header.version);\r\n\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function writeHeaderData(char: types.ID2S, constants: types.IConstantData): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  const v = await _versionSpecificHeader(char.header.version);\r\n  if (v == null) {\r\n    throw new Error(`Cannot parse version: ${char.header.version}`);\r\n  }\r\n  v.writeHeader(char, writer, constants);\r\n\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function fixHeader(writer: BitWriter) {\r\n  let checksum = 0;\r\n  const eof = writer.length / 8;\r\n  writer.SeekByte(0x0008).WriteUInt32(eof);\r\n  writer.SeekByte(0x000c).WriteUInt32(0);\r\n  for (let i = 0; i < eof; i++) {\r\n    let byte = writer.SeekByte(i).PeekBytes(1)[0];\r\n    if (checksum & 0x80000000) {\r\n      byte += 1;\r\n    }\r\n    checksum = byte + checksum * 2;\r\n    //hack make it a uint32\r\n    checksum >>>= 0;\r\n  }\r\n  //checksum pos\r\n  writer.SeekByte(0x000c).WriteUInt32(checksum);\r\n}\r\n\r\n/**\r\n * Save Version\r\n * 0x47, 0x0, 0x0, 0x0 = <1.06\r\n * 0x59, 0x0, 0x0, 0x0 = 1.08 = version\r\n * 0x5c, 0x0, 0x0, 0x0 = 1.09 = version\r\n * 0x60, 0x0, 0x0, 0x0 = 1.13c = version\r\n * 0x62, 0x0, 0x0, 0x0 = 1.2 = version\r\n * */\r\nasync function _versionSpecificHeader(version: number) {\r\n  switch (version) {\r\n    case 0x60: {\r\n      return await import(`./versions/default_header`);\r\n    }\r\n    default: {\r\n      return await import(`./versions/default_header`);\r\n    }\r\n  }\r\n}\r\n","import * as types from \"./types\";\r\nimport { BitReader } from \"../binary/bitreader\";\r\nimport { BitWriter } from \"../binary/bitwriter\";\r\n\r\n// prettier-ignore\r\n//huffman tree\r\nconst HUFFMAN = [[[[[\"w\",\"u\"],[[\"8\",[\"y\",[\"5\",[\"j\",[]]]]],\"h\"]],[\"s\",[[\"2\",\"n\"],\"x\"]]],[[[\"c\",[\"k\",\"f\"]],\"b\"],[[\"t\",\"m\"],[\"9\",\"7\"]]]],[\" \",[[[[\"e\",\"d\"],\"p\"],[\"g\",[[[\"z\",\"q\"],\"3\"],[\"v\",\"6\"]]]],[[\"r\",\"l\"],[\"a\",[[\"1\",[\"4\",\"0\"]],[\"i\",\"o\"]]]]]]];\r\n// prettier-ignore\r\nconst HUFFMAN_LOOKUP = { \"0\": { \"v\": 223, \"l\": 8 }, \"1\": { \"v\": 31, \"l\": 7 }, \"2\": { \"v\": 12, \"l\": 6 }, \"3\": { \"v\": 91, \"l\": 7 }, \"4\": { \"v\": 95, \"l\": 8 }, \"5\": { \"v\": 104, \"l\": 8 }, \"6\": { \"v\": 123, \"l\": 7 }, \"7\": { \"v\": 30, \"l\": 5 }, \"8\": { \"v\": 8, \"l\": 6 }, \"9\": { \"v\": 14, \"l\": 5 }, \" \": { \"v\": 1, \"l\": 2 }, \"a\": { \"v\": 15, \"l\": 5 }, \"b\": { \"v\": 10, \"l\": 4 }, \"c\": { \"v\": 2, \"l\": 5 }, \"d\": { \"v\": 35, \"l\": 6 }, \"e\": { \"v\": 3, \"l\": 6 }, \"f\": { \"v\": 50, \"l\": 6 }, \"g\": { \"v\": 11, \"l\": 5 }, \"h\": { \"v\": 24, \"l\": 5 }, \"i\": { \"v\": 63, \"l\": 7 }, \"j\": { \"v\": 232, \"l\": 9 }, \"k\": { \"v\": 18, \"l\": 6 }, \"l\": { \"v\": 23, \"l\": 5 }, \"m\": { \"v\": 22, \"l\": 5 }, \"n\": { \"v\": 44, \"l\": 6 }, \"o\": { \"v\": 127, \"l\": 7 }, \"p\": { \"v\": 19, \"l\": 5 }, \"q\": { \"v\": 155, \"l\": 8 }, \"r\": { \"v\": 7, \"l\": 5 }, \"s\": { \"v\": 4, \"l\": 4 }, \"t\": { \"v\": 6, \"l\": 5 }, \"u\": { \"v\": 16, \"l\": 5 }, \"v\": { \"v\": 59, \"l\": 7 }, \"w\": { \"v\": 0, \"l\": 5 }, \"x\": { \"v\": 28, \"l\": 5 }, \"y\": { \"v\": 40, \"l\": 7 }, \"z\": { \"v\": 27, \"l\": 8 } };\r\n\r\nexport async function readCharItems(char: types.ID2S, reader: BitReader, constants: types.IConstantData, config: types.IConfig) {\r\n  char.items = await readItems(reader, char.header.version, constants, config, char);\r\n}\r\n\r\nexport async function writeCharItems(char: types.ID2S, constants: types.IConstantData, config: types.IConfig): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteArray(await writeItems(char.items, char.header.version, constants, config));\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function readMercItems(char: types.ID2S, reader: BitReader, constants: types.IConstantData, config: types.IConfig) {\r\n  char.merc_items = [] as types.IItem[];\r\n  const header = reader.ReadString(2); //0x0000 [merc item list header = \"jf\"]\r\n  if (header !== \"jf\") {\r\n    // header is not present in first save after char is created\r\n    if (char?.header.level === 1) {\r\n      return;\r\n    }\r\n\r\n    throw new Error(`Mercenary header 'jf' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  if (char.header.merc_id && parseInt(char.header.merc_id, 16) !== 0) {\r\n    char.merc_items = await readItems(reader, char.header.version, constants, config, char);\r\n  }\r\n}\r\n\r\nexport async function writeMercItems(char: types.ID2S, constants: types.IConstantData, config: types.IConfig): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"jf\", 2);\r\n  if (char.header.merc_id && parseInt(char.header.merc_id, 16) !== 0) {\r\n    char.merc_items = char.merc_items || [];\r\n    writer.WriteArray(await writeItems(char.merc_items, char.header.version, constants, config));\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function readGolemItems(char: types.ID2S, reader: BitReader, constants: types.IConstantData, config: types.IConfig) {\r\n  const header = reader.ReadString(2); //0x0000 [golem item list header = \"kf\"]\r\n  if (header !== \"kf\") {\r\n    // header is not present in first save after char is created\r\n    if (char?.header.level === 1) {\r\n      return;\r\n    }\r\n\r\n    throw new Error(`Golem header 'kf' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  const has_golem = reader.ReadUInt8();\r\n  if (has_golem === 1) {\r\n    char.golem_item = await readItem(reader, char.header.version, constants, config);\r\n  }\r\n}\r\n\r\nexport async function writeGolemItems(char: types.ID2S, constants: types.IConstantData, config: types.IConfig): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"kf\", 2);\r\n  if (char.golem_item) {\r\n    writer.WriteUInt8(1);\r\n    writer.WriteArray(await writeItem(char.golem_item, char.header.version, constants, config));\r\n  } else {\r\n    writer.WriteUInt8(0);\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function readCorpseItems(char: types.ID2S, reader: BitReader, constants: types.IConstantData, config: types.IConfig) {\r\n  char.corpse_items = [] as types.IItem[];\r\n  const header = reader.ReadString(2); //0x0000 [item list header = 0x4a, 0x4d \"JM\"]\r\n  if (header !== \"JM\") {\r\n    // header is not present in first save after char is created\r\n    if (char.header.level === 1) {\r\n      char.is_dead = 0;\r\n      return;\r\n    }\r\n\r\n    throw new Error(`Corpse header 'JM' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  char.is_dead = reader.ReadUInt16(); //0x0002 [corpse count]\r\n  for (let i = 0; i < char.is_dead; i++) {\r\n    reader.SkipBytes(12); //0x0004 [unk4, x_pos, y_pos]\r\n    char.corpse_items = char.corpse_items.concat(await readItems(reader, char.header.version, constants, config, char));\r\n  }\r\n}\r\n\r\nexport async function writeCorpseItem(char: types.ID2S, constants: types.IConstantData, config: types.IConfig): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"JM\", 2);\r\n  writer.WriteUInt16(char.is_dead);\r\n  //json struct doesnt support multiple corpses without modifying it\r\n  if (char.is_dead) {\r\n    writer.WriteArray(new Uint8Array(12));\r\n    char.corpse_items = char.corpse_items || [];\r\n    writer.WriteArray(await writeItems(char.corpse_items, char.header.version, constants, config));\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function readItems(\r\n  reader: BitReader,\r\n  version: number,\r\n  constants: types.IConstantData,\r\n  config: types.IConfig,\r\n  char?: types.ID2S\r\n) {\r\n  const items = [] as types.IItem[];\r\n  const header = reader.ReadString(2); //0x0000 [item list header = 0x4a, 0x4d \"JM\"]\r\n  if (header !== \"JM\") {\r\n    // header is not present in first save after char is created\r\n    if (char?.header.level === 1) {\r\n      return []; // TODO: return starter items based on class\r\n    }\r\n\r\n    throw new Error(`Item list header 'JM' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  const count = reader.ReadUInt16(); //0x0002\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    items.push(await readItem(reader, version, constants, config));\r\n  }\r\n  return items;\r\n}\r\n\r\nexport async function writeItems(\r\n  items: types.IItem[],\r\n  version: number,\r\n  constants: types.IConstantData,\r\n  config: types.IConfig\r\n): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"JM\", 2);\r\n  writer.WriteUInt16(items.length);\r\n  for (let i = 0; i < items.length; i++) {\r\n    writer.WriteArray(await writeItem(items[i], version, constants, config));\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nexport async function readItem(\r\n  reader: BitReader,\r\n  version: number,\r\n  originalConstants: types.IConstantData,\r\n  config: types.IConfig,\r\n  parent?: types.IItem\r\n): Promise<types.IItem> {\r\n  if (version <= 0x60) {\r\n    const header = reader.ReadString(2); //0x0000 [item header = 0x4a, 0x4d \"JM\"]\r\n    if (header !== \"JM\") {\r\n      throw new Error(`Item header 'JM' not found at position ${reader.offset - 2 * 8}`);\r\n    }\r\n  }\r\n  const constants = originalConstants;\r\n  const item = {} as types.IItem;\r\n  _readSimpleBits(item, reader, version, constants, config);\r\n  if (!item.simple_item) {\r\n    item.id = reader.ReadUInt32(32);\r\n    item.level = reader.ReadUInt8(7);\r\n    item.quality = reader.ReadUInt8(4);\r\n    item.multiple_pictures = reader.ReadBit();\r\n    if (item.multiple_pictures) {\r\n      item.picture_id = reader.ReadUInt8(3);\r\n    }\r\n    item.class_specific = reader.ReadBit();\r\n    if (item.class_specific) {\r\n      item.auto_affix_id = reader.ReadUInt16(11);\r\n    }\r\n    switch (item.quality) {\r\n      case types.Quality.Low:\r\n        item.low_quality_id = reader.ReadUInt8(3);\r\n        break;\r\n      case types.Quality.Normal:\r\n        break;\r\n      case types.Quality.Superior:\r\n        item.file_index = reader.ReadUInt8(3);\r\n        break;\r\n      case types.Quality.Magic:\r\n        item.magic_prefix = reader.ReadUInt16(11);\r\n        if (item.magic_prefix)\r\n          item.magic_prefix_name = constants.magic_prefixes[item.magic_prefix] ? constants.magic_prefixes[item.magic_prefix].n : null;\r\n        item.magic_suffix = reader.ReadUInt16(11);\r\n        if (item.magic_suffix)\r\n          item.magic_suffix_name = constants.magic_suffixes[item.magic_suffix] ? constants.magic_suffixes[item.magic_suffix].n : null;\r\n        break;\r\n      case types.Quality.Set:\r\n        item.set_id = reader.ReadUInt16(12);\r\n        item.set_name = constants.set_items[item.set_id] ? constants.set_items[item.set_id].n : null;\r\n        break;\r\n      case types.Quality.Unique:\r\n        item.unique_id = reader.ReadUInt16(12);\r\n        item.unique_name = constants.unq_items[item.unique_id] ? constants.unq_items[item.unique_id].n : null;\r\n        break;\r\n      case types.Quality.Rare:\r\n      case types.Quality.Crafted:\r\n        item.rare_name_id = reader.ReadUInt8(8);\r\n        if (item.rare_name_id) item.rare_name = constants.rare_names[item.rare_name_id] ? constants.rare_names[item.rare_name_id].n : null;\r\n        item.rare_name_id2 = reader.ReadUInt8(8);\r\n        if (item.rare_name_id2)\r\n          item.rare_name2 = constants.rare_names[item.rare_name_id2] ? constants.rare_names[item.rare_name_id2].n : null;\r\n        item.magical_name_ids = [];\r\n        for (let i = 0; i < 6; i++) {\r\n          const prefix = reader.ReadBit();\r\n          if (prefix === 1) {\r\n            item.magical_name_ids[i] = reader.ReadUInt16(11);\r\n          } else {\r\n            item.magical_name_ids[i] = null;\r\n          }\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (item.given_runeword) {\r\n      item.runeword_id = reader.ReadUInt16(12);\r\n      //fix delerium on d2gs??? why is this a thing?\r\n      if (item.runeword_id == 2718) {\r\n        item.runeword_id = 48;\r\n      } else if (item.runeword_id > 2783) {\r\n        item.runeword_id -= 2588;\r\n      } \r\n      if (constants.runewords[item.runeword_id]) {\r\n        item.runeword_name = constants.runewords[item.runeword_id]!.n!;\r\n      }\r\n      reader.ReadUInt8(4);\r\n    }\r\n\r\n    if (item.personalized) {\r\n      const arr = new Uint8Array(16);\r\n      for (let i = 0; i < arr.length; i++) {\r\n        if (version > 0x61) {\r\n          arr[i] = reader.ReadUInt8(8);\r\n        } else {\r\n          arr[i] = reader.ReadUInt8(7);\r\n        }\r\n        if (arr[i] === 0x00) {\r\n          break;\r\n        }\r\n      }\r\n      item.personalized_name = new BitReader(arr).ReadString(16).trim().replace(/\\0/g, \"\");\r\n    }\r\n\r\n    //tomes\r\n    if (item.type === \"tbk\" || item.type == \"ibk\") {\r\n      reader.ReadUInt8(5);\r\n    }\r\n\r\n    //realm data\r\n    item.timestamp = reader.ReadUInt8(1);\r\n\r\n    if (item.type_id === types.ItemType.Armor) {\r\n      item.defense_rating = reader.ReadUInt16(constants.magical_properties[31].sB) - constants.magical_properties[31].sA;\r\n    }\r\n    if (item.type_id === types.ItemType.Armor || item.type_id === types.ItemType.Weapon) {\r\n      item.max_durability = reader.ReadUInt16(constants.magical_properties[73].sB) - constants.magical_properties[73].sA;\r\n      if (item.max_durability > 0) {\r\n        item.current_durability = reader.ReadUInt16(constants.magical_properties[72].sB) - constants.magical_properties[72].sA;\r\n      }\r\n    }\r\n\r\n    if (constants.stackables[item.type]) {\r\n      item.quantity = reader.ReadUInt16(9);\r\n    }\r\n\r\n    if (item.socketed === 1) {\r\n      item.total_nr_of_sockets = reader.ReadUInt8(4);\r\n    }\r\n\r\n    /**\r\n     * 5 bits. any of the 5 bits can be set. if a bit is set that means\r\n     * means +1 to the set_list_count\r\n     */\r\n    let plist_flag = 0;\r\n    if (item.quality === types.Quality.Set) {\r\n      plist_flag = reader.ReadUInt8(5);\r\n      item.set_list_count = 0;\r\n      item._unknown_data.plist_flag = plist_flag;\r\n    }\r\n\r\n    //magical properties\r\n    let magic_attributes = _readMagicProperties(reader, constants);\r\n    item.magic_attributes = magic_attributes;\r\n\r\n    while (plist_flag > 0) {\r\n      if (plist_flag & 1) {\r\n        item.set_list_count += 1;\r\n        magic_attributes = _readMagicProperties(reader, constants);\r\n        if (item.set_attributes) {\r\n          item.set_attributes.push(magic_attributes);\r\n        } else {\r\n          item.set_attributes = [magic_attributes];\r\n        }\r\n      }\r\n      plist_flag >>>= 1;\r\n    }\r\n\r\n    if (item.given_runeword === 1) {\r\n      magic_attributes = _readMagicProperties(reader, constants);\r\n      if (magic_attributes && magic_attributes.length > 0) {\r\n        item.runeword_attributes = magic_attributes;\r\n      }\r\n    }\r\n  }\r\n  reader.Align();\r\n\r\n  if (item.nr_of_items_in_sockets > 0 && item.simple_item === 0) {\r\n    item.socketed_items = [];\r\n    for (let i = 0; i < item.nr_of_items_in_sockets; i++) {\r\n      item.socketed_items.push(await readItem(reader, version, constants, config, item));\r\n    }\r\n  }\r\n  //console.log(JSON.stringify(item));\r\n  return item;\r\n}\r\n\r\nexport async function writeItem(\r\n  item: types.IItem,\r\n  version: number,\r\n  constants: types.IConstantData,\r\n  config: types.IConfig\r\n): Promise<Uint8Array> {\r\n  if (item._unknown_data === undefined) {\r\n    item._unknown_data = {};\r\n  }\r\n  if (item.categories === undefined) {\r\n    item.categories = _GetItemTXT(item, constants)?.c;\r\n  }\r\n\r\n  const writer = new BitWriter();\r\n  if (version <= 0x60) {\r\n    writer.WriteString(\"JM\", 2);\r\n  }\r\n  _writeSimpleBits(writer, version, item, constants, config);\r\n  if (!item.simple_item) {\r\n    writer.WriteUInt32(item.id, 32);\r\n    writer.WriteUInt8(item.level, 7);\r\n    writer.WriteUInt8(item.quality, 4);\r\n    writer.WriteUInt8(item.multiple_pictures, 1);\r\n    if (item.multiple_pictures) {\r\n      writer.WriteUInt8(item.picture_id, 3);\r\n    }\r\n    writer.WriteUInt8(item.class_specific, 1);\r\n    if (item.class_specific === 1) {\r\n      writer.WriteUInt16(item.auto_affix_id || 0, 11);\r\n    }\r\n    switch (item.quality) {\r\n      case types.Quality.Low:\r\n        writer.WriteUInt8(item.low_quality_id, 3);\r\n        break;\r\n      case types.Quality.Normal:\r\n        break;\r\n      case types.Quality.Superior:\r\n        writer.WriteUInt8(item.file_index || 0, 3);\r\n        break;\r\n      case types.Quality.Magic:\r\n        writer.WriteUInt16(item.magic_prefix, 11);\r\n        writer.WriteUInt16(item.magic_suffix, 11);\r\n        break;\r\n      case types.Quality.Set:\r\n        writer.WriteUInt16(item.set_id, 12);\r\n        break;\r\n      case types.Quality.Unique:\r\n        writer.WriteUInt16(item.unique_id, 12);\r\n        break;\r\n      case types.Quality.Rare:\r\n      case types.Quality.Crafted:\r\n        writer.WriteUInt8(item.rare_name_id !== undefined ? item.rare_name_id : _lookupRareId(item.rare_name, constants), 8);\r\n        writer.WriteUInt8(item.rare_name_id2 !== undefined ? item.rare_name_id2 : _lookupRareId(item.rare_name2, constants), 8);\r\n        for (let i = 0; i < 6; i++) {\r\n          const magical_name_id = item.magical_name_ids[i];\r\n          if (magical_name_id) {\r\n            writer.WriteBit(1);\r\n            writer.WriteUInt16(magical_name_id, 11);\r\n          } else {\r\n            writer.WriteBit(0);\r\n          }\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    if (item.given_runeword) {\r\n      //fix delerium on d2gs??? why is this a thing?\r\n      let runeword_id = item.runeword_id;\r\n      if (runeword_id == 2718) {\r\n        runeword_id = 48;\r\n      }\r\n      writer.WriteUInt16(runeword_id, 12);\r\n      writer.WriteUInt8(5, 4); //always 5?\r\n    }\r\n\r\n    if (item.personalized) {\r\n      const name = item.personalized_name.substring(0, 16);\r\n      for (let i = 0; i < name.length; i++) {\r\n        if (version > 0x61) {\r\n          writer.WriteUInt8(name.charCodeAt(i), 8);\r\n        } else {\r\n          writer.WriteUInt8(name.charCodeAt(i) & 0x7f, 7);\r\n        }\r\n      }\r\n      writer.WriteUInt8(0x00, version > 0x61 ? 8 : 7);\r\n    }\r\n\r\n    if (item.type === \"tbk\") {\r\n      writer.WriteUInt8(0, 5);\r\n    } else if (item.type === \"ibk\") {\r\n      writer.WriteUInt8(1, 5);\r\n    }\r\n\r\n    writer.WriteUInt8(item.timestamp, 1);\r\n\r\n    if (item.type_id === types.ItemType.Armor || item.type_id === types.ItemType.Shield) {\r\n      writer.WriteUInt16(item.defense_rating + constants.magical_properties[31].sA, constants.magical_properties[31].sB);\r\n    }\r\n\r\n    if (item.type_id === types.ItemType.Armor || item.type_id === types.ItemType.Shield || item.type_id === types.ItemType.Weapon) {\r\n      writer.WriteUInt16(item.max_durability || 0, constants.magical_properties[73].sB);\r\n      if (item.max_durability > 0) {\r\n        writer.WriteUInt16(item.current_durability, constants.magical_properties[72].sB);\r\n      }\r\n    }\r\n\r\n    if (constants.stackables[item.type]) {\r\n      writer.WriteUInt16(item.quantity, 9);\r\n    }\r\n\r\n    if (item.socketed === 1) {\r\n      writer.WriteUInt8(item.total_nr_of_sockets, 4);\r\n    }\r\n\r\n    if (item.quality === types.Quality.Set) {\r\n      const set_attribute_count = item.set_attributes != null ? item.set_attributes.length : 0;\r\n      //reduced by -1 removed as this seems to be wrong\r\n      const plist_flag = (1 << set_attribute_count) - 1;\r\n      writer.WriteUInt8(item._unknown_data.plist_flag || plist_flag, 5);\r\n    }\r\n\r\n    _writeMagicProperties(writer, item.magic_attributes, constants);\r\n    if (item.set_attributes && item.set_attributes.length > 0) {\r\n      for (let i = 0; i < item.set_attributes.length; i++) {\r\n        _writeMagicProperties(writer, item.set_attributes[i], constants);\r\n      }\r\n    }\r\n\r\n    if (item.given_runeword === 1) {\r\n      _writeMagicProperties(writer, item.runeword_attributes, constants);\r\n    }\r\n  }\r\n\r\n  writer.Align();\r\n\r\n  if (item.nr_of_items_in_sockets > 0 && item.simple_item === 0) {\r\n    for (let i = 0; i < item.nr_of_items_in_sockets; i++) {\r\n      writer.WriteArray(await writeItem(item.socketed_items[i], version, constants, config));\r\n    }\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readSimpleBits(item: types.IItem, reader: BitReader, version: number, constants: types.IConstantData, config: types.IConfig) {\r\n  //init so we do not have npe's\r\n  item._unknown_data = {};\r\n  //1.10-1.14d\r\n  //[flags:32][version:10][mode:3]([invloc:4][x:4][y:4][page:3])([itemcode:32])([sockets:3])\r\n  //1.15\r\n  //[flags:32][version:3][mode:3]([invloc:4][x:4][y:4][page:3])([itemcode:variable])([sockets:3])\r\n  item._unknown_data.b0_3 = reader.ReadBitArray(4);\r\n  item.identified = reader.ReadBit();\r\n  item._unknown_data.b5_10 = reader.ReadBitArray(6);\r\n  item.socketed = reader.ReadBit();\r\n  item._unknown_data.b12 = reader.ReadBitArray(1);\r\n  item.new = reader.ReadBit();\r\n  item._unknown_data.b14_15 = reader.ReadBitArray(2);\r\n  item.is_ear = reader.ReadBit();\r\n  item.starter_item = reader.ReadBit();\r\n  item._unknown_data.b18_20 = reader.ReadBitArray(3);\r\n  item.simple_item = reader.ReadBit();\r\n  item.ethereal = reader.ReadBit();\r\n  item._unknown_data.b23 = reader.ReadBitArray(1);\r\n  item.personalized = reader.ReadBit();\r\n  item._unknown_data.b25 = reader.ReadBitArray(1);\r\n  item.given_runeword = reader.ReadBit();\r\n  item._unknown_data.b27_31 = reader.ReadBitArray(5);\r\n\r\n  if (version <= 0x60) {\r\n    item.version = reader.ReadUInt16(10).toString(10);\r\n  } else if (version >= 0x61) {\r\n    item.version = reader.ReadUInt16(3).toString(2);\r\n  }\r\n  item.location_id = reader.ReadUInt8(3);\r\n  item.equipped_id = reader.ReadUInt8(4);\r\n  item.position_x = reader.ReadUInt8(4);\r\n  item.position_y = reader.ReadUInt8(4);\r\n  item.alt_position_id = reader.ReadUInt8(3);\r\n  if (item.is_ear) {\r\n    const clazz = reader.ReadUInt8(3);\r\n    const level = reader.ReadUInt8(7);\r\n    const arr = new Uint8Array(15);\r\n    for (let i = 0; i < arr.length; i++) {\r\n      arr[i] = reader.ReadUInt8(7);\r\n      if (arr[i] === 0x00) {\r\n        break;\r\n      }\r\n    }\r\n    const name = new BitReader(arr).ReadString(15).trim().replace(/\\0/g, \"\");\r\n    item.ear_attributes = {\r\n      class: clazz,\r\n      level: level,\r\n      name: name,\r\n    } as types.IEarAttributes;\r\n  } else {\r\n    if (version <= 0x60) {\r\n      item.type = reader.ReadString(4);\r\n    } else if (version >= 0x61) {\r\n      item.type = \"\";\r\n      //props to d07riv\r\n      //https://github.com/d07RiV/d07riv.github.io/blob/master/d2r.html#L11-L20\r\n      for (let i = 0; i < 4; i++) {\r\n        let node = HUFFMAN as any;\r\n        do {\r\n          node = node[reader.ReadBit()];\r\n        } while (Array.isArray(node));\r\n        item.type += node;\r\n      }\r\n    }\r\n    item.type = item.type.trim().replace(/\\0/g, \"\");\r\n    let details = _GetItemTXT(item, constants);\r\n    item.categories = details?.c;\r\n    if (item?.categories.includes(\"Any Armor\")) {\r\n      item.type_id = types.ItemType.Armor;\r\n    } else if (item?.categories.includes(\"Weapon\")) {\r\n      item.type_id = types.ItemType.Weapon;\r\n      details = constants.weapon_items[item.type];\r\n    } else {\r\n      item.type_id = types.ItemType.Other;\r\n    }\r\n\r\n    let bits = item.simple_item ? 1 : 3;\r\n    if (item.categories?.includes(\"Quest\")) {\r\n      item.quest_difficulty = reader.ReadUInt16(constants.magical_properties[356].sB) - constants.magical_properties[356].sA;\r\n      bits = 1;\r\n    }\r\n    item.nr_of_items_in_sockets = reader.ReadUInt8(bits);\r\n  }\r\n}\r\n\r\nfunction _lookupRareId(name: string, constants: types.IConstantData): number {\r\n  //some inconsistencies with txt data and nokka. so have to hack it with startsWith\r\n  return constants.rare_names.findIndex(\r\n    (k) => k && (k.n.toLowerCase().startsWith(name.toLowerCase()) || name.toLowerCase().startsWith(k.n.toLowerCase()))\r\n  );\r\n}\r\n\r\nfunction _writeSimpleBits(writer: BitWriter, version: number, item: types.IItem, constants: types.IConstantData, config: types.IConfig) {\r\n  writer.WriteBits(item._unknown_data.b0_3 || new Uint8Array(4), 4);\r\n  writer.WriteBit(item.identified);\r\n  writer.WriteBits(item._unknown_data.b5_10 || new Uint8Array(6), 6);\r\n  writer.WriteBit(item.socketed);\r\n  writer.WriteBits(item._unknown_data.b12 || new Uint8Array(1), 1);\r\n  writer.WriteBit(item.new);\r\n  writer.WriteBits(item._unknown_data.b14_15 || new Uint8Array(2), 2);\r\n  writer.WriteBit(item.is_ear);\r\n  writer.WriteBit(item.starter_item);\r\n  writer.WriteBits(item._unknown_data.b18_20 || new Uint8Array(3), 3);\r\n  writer.WriteBit(item.simple_item);\r\n  writer.WriteBit(item.ethereal);\r\n  writer.WriteBits(item._unknown_data.b23 || new Uint8Array([1]), 1); //always 1? IFLAG_JUSTSAVED\r\n  writer.WriteBit(item.personalized);\r\n  writer.WriteBits(item._unknown_data.b25 || new Uint8Array(1), 1); //IFLAG_LOWQUALITY\r\n  writer.WriteBit(item.given_runeword);\r\n  writer.WriteBits(item._unknown_data.b27_31 || new Uint8Array(5), 5);\r\n\r\n  const itemVersion = item.version != null ? item.version : \"101\";\r\n  if (version <= 0x60) {\r\n    // 0 = pre-1.08; 1 = 1.08/1.09 normal; 2 = 1.10 normal; 100 = 1.08/1.09 expansion; 101 = 1.10 expansion\r\n    writer.WriteUInt16(parseInt(itemVersion, 10), 10);\r\n  } else if (version >= 0x61) {\r\n    writer.WriteUInt16(parseInt(itemVersion, 2), 3);\r\n  }\r\n  writer.WriteUInt8(item.location_id, 3);\r\n  writer.WriteUInt8(item.equipped_id, 4);\r\n  writer.WriteUInt8(item.position_x, 4);\r\n  writer.WriteUInt8(item.position_y, 4);\r\n  writer.WriteUInt8(item.alt_position_id, 3);\r\n  if (item.is_ear) {\r\n    writer.WriteUInt8(item.ear_attributes.class, 3);\r\n    writer.WriteUInt8(item.ear_attributes.level, 7);\r\n    const name = item.ear_attributes.name.substring(0, 15);\r\n    for (let i = 0; i < name.length; i++) {\r\n      writer.WriteUInt8(name.charCodeAt(i) & 0x7f, 7);\r\n    }\r\n    writer.WriteUInt8(0x00, 7);\r\n  } else {\r\n    const t = item.type.padEnd(4, \" \");\r\n    if (version <= 0x60) {\r\n      writer.WriteString(t, 4);\r\n    } else {\r\n      for (const c of t) {\r\n        const n = HUFFMAN_LOOKUP[c];\r\n        writer.WriteUInt16(n.v, n.l);\r\n      }\r\n    }\r\n\r\n    let bits = item.simple_item ? 1 : 3;\r\n    if (item.categories?.includes(\"Quest\")) {\r\n      const difficulty = item.quest_difficulty || 0;\r\n      writer.WriteUInt16(difficulty + constants.magical_properties[356].sA, constants.magical_properties[356].sB);\r\n      bits = 1;\r\n    }\r\n    writer.WriteUInt8(item.nr_of_items_in_sockets, bits);\r\n  }\r\n}\r\n\r\nexport function _readMagicProperties(reader: BitReader, constants: types.IConstantData) {\r\n  let id = reader.ReadUInt16(9);\r\n  const magic_attributes = [];\r\n  while (id != 0x1ff) {\r\n    const values = [];\r\n    if (id > constants.magical_properties.length) {\r\n      throw new Error(`Invalid Stat Id: ${id} at position ${reader.offset - 9}`);\r\n    }\r\n    const num_of_properties = constants.magical_properties[id].np || 1;\r\n    for (let i = 0; i < num_of_properties; i++) {\r\n      const prop = constants.magical_properties[id + i];\r\n      if (prop == null) {\r\n        throw new Error(`Cannot find Magical Property for id: ${id} at position ${reader.offset}`);\r\n      }\r\n      if (prop.sP) {\r\n        let param = reader.ReadUInt16(prop.sP);\r\n        switch (prop.dF) {\r\n          case 14: //TODO +skill to skilltab\r\n            values.push(param & 0x7);\r\n            param = (param >> 3) & 0x1fff;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        //encode\r\n        switch (prop.e) {\r\n          case 1:\r\n            //throw new Error(`Unimplemented encoding: ${prop.encode}`);\r\n            break;\r\n          case 2: //chance to cast\r\n          case 3: //charges\r\n            values.push(param & 0x3f); //skill level\r\n            param = (param >> 6) & 0x3ff; //skll id\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        values.push(param);\r\n      }\r\n      if (!prop.sB) {\r\n        throw new Error(`Save Bits is undefined for stat: ${id}:${prop.s} at position ${reader.offset}`);\r\n      }\r\n      let v = reader.ReadUInt16(prop.sB);\r\n      if (prop.sA) {\r\n        v -= prop.sA;\r\n      }\r\n      switch (prop.e) {\r\n        case 3:\r\n          values.push(v & 0xff); // current charges\r\n          values.push((v >> 8) & 0xff); //max charges\r\n          break;\r\n        default:\r\n          values.push(v);\r\n          break;\r\n      }\r\n    }\r\n    magic_attributes.push({\r\n      id: id,\r\n      values: values,\r\n      name: constants.magical_properties[id].s,\r\n    } as types.IMagicProperty);\r\n    id = reader.ReadUInt16(9);\r\n  }\r\n  return magic_attributes;\r\n}\r\n\r\nexport function _writeMagicProperties(writer: BitWriter, properties: types.IMagicProperty[], constants: types.IConstantData) {\r\n  if (properties) {\r\n    for (let i = 0; i < properties.length; i++) {\r\n      const property = properties[i];\r\n      let valueIdx = 0;\r\n      writer.WriteUInt16(property.id, 9);\r\n      const num_of_properties = constants.magical_properties[property!.id].np || 1;\r\n      for (let j = 0; j < num_of_properties; j++) {\r\n        const prop = constants.magical_properties[property!.id + j];\r\n        if (prop == null) {\r\n          throw new Error(`Cannot find Magical Property for id: ${property.id}`);\r\n        }\r\n        if (prop.sP) {\r\n          let param = property.values[valueIdx++]!;\r\n          switch (prop.dF) {\r\n            case 14: //+skill to skilltab\r\n              param |= (property.values[valueIdx++]! & 0x1fff) << 3;\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          //encode\r\n          switch (prop.e) {\r\n            case 1:\r\n              //throw new Error(`Unimplemented encoding: ${prop.encode}`);\r\n              break;\r\n            case 2: //chance to cast\r\n            case 3: //charges\r\n              param |= (property.values[valueIdx++]! & 0x3ff) << 6;\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          writer.WriteUInt32(param, prop.sP);\r\n        }\r\n        let v = property.values[valueIdx++]!;\r\n        if (prop.sA) {\r\n          v += prop.sA;\r\n        }\r\n        switch (prop.e) {\r\n          case 3:\r\n            v |= (property.values[valueIdx++]! & 0xff) << 8;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        if (!prop.sB) {\r\n          throw new Error(`Save Bits is undefined for stat: ${property.id}:${prop.s}`);\r\n        }\r\n        writer.WriteUInt32(v, prop.sB);\r\n      }\r\n    }\r\n  }\r\n  writer.WriteUInt16(0x1ff, 9);\r\n}\r\n\r\nfunction _GetItemTXT(item: types.IItem, constants: types.IConstantData): any {\r\n  if (constants.armor_items[item.type]) {\r\n    return constants.armor_items[item.type];\r\n  } else if (constants.weapon_items[item.type]) {\r\n    return constants.weapon_items[item.type];\r\n  } else if (constants.other_items[item.type]) {\r\n    return constants.other_items[item.type];\r\n  }\r\n}\r\n","import * as types from \"./types\";\r\nimport { BitReader } from \"../binary/bitreader\";\r\nimport { BitWriter } from \"../binary/bitwriter\";\r\n\r\nexport async function readSkills(char: types.ID2S, reader: BitReader, constants: types.IConstantData) {\r\n  char.skills = [] as types.ISkill[];\r\n  const offset = SkillOffset[<string>char.header.class];\r\n  const header = reader.ReadString(2); //0x0000 [skills header = 0x69, 0x66 \"if\"]\r\n  if (header !== \"if\") {\r\n    // header is not present in first save after char is created\r\n    if (char.header.level === 1) {\r\n      return; // TODO: return starter skills based on class\r\n    }\r\n\r\n    throw new Error(`Skills header 'if' not found at position ${reader.offset - 2 * 8}`);\r\n  }\r\n  for (let i = 0; i < 30; i++) {\r\n    const id = offset + i;\r\n    char.skills.push({\r\n      id: id,\r\n      points: reader.ReadUInt8(),\r\n      name: constants.skills[id].s,\r\n    } as types.ISkill);\r\n  }\r\n}\r\n\r\nexport async function writeSkills(char: types.ID2S, constants: types.IConstantData): Promise<Uint8Array> {\r\n  const writer = new BitWriter();\r\n  writer.WriteString(\"if\", 2); //0x0000 [skills header = 0x69, 0x66 \"if\"]\r\n  //probably array length checking/sorting of skills by id...\r\n  for (let i = 0; i < 30; i++) {\r\n    writer.WriteUInt8(char.skills[i].points);\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\ninterface ISkillOffset {\r\n  [key: string]: number;\r\n}\r\n\r\nconst SkillOffset: ISkillOffset = {\r\n  Amazon: 6,\r\n  Sorceress: 36,\r\n  Necromancer: 66,\r\n  Paladin: 96,\r\n  Barbarian: 126,\r\n  Druid: 221,\r\n  Assassin: 251,\r\n};\r\n","//todo define types for these\r\nexport interface IConfig {\r\n  extendedStash?: boolean;\r\n  sortProperties?: boolean;\r\n}\r\n\r\nexport interface IConstantData {\r\n  classes: any[];\r\n  skills: any[];\r\n  magic_prefixes: any[];\r\n  magic_suffixes: any[];\r\n  rare_names: any[];\r\n  armor_items: any;\r\n  weapon_items: any;\r\n  other_items: any;\r\n  stackables: any;\r\n  properties: any;\r\n  magical_properties: any[];\r\n  runewords: any[];\r\n  set_items: any[];\r\n  unq_items: any[];\r\n}\r\n\r\nexport interface ID2S {\r\n  header: IHeader;\r\n  attributes: IAttributes;\r\n  item_bonuses: IMagicProperty[];\r\n  skills: ISkill[]; //Skill\r\n  items: IItem[]; //Item\r\n  corpse_items: IItem[];\r\n  merc_items: IItem[];\r\n  golem_item: IItem;\r\n  is_dead: number;\r\n}\r\n\r\nexport interface IAttributes {\r\n  [key: string]: number;\r\n}\r\n\r\nexport interface IMenuAppearance {\r\n  graphic: number;\r\n  tint: number;\r\n}\r\nexport interface ICharMenuAppearance {\r\n  //composite.txt\r\n  head: IMenuAppearance;\r\n  torso: IMenuAppearance;\r\n  legs: IMenuAppearance;\r\n  right_arm: IMenuAppearance;\r\n  left_arm: IMenuAppearance;\r\n  right_hand: IMenuAppearance;\r\n  left_hand: IMenuAppearance;\r\n  shield: IMenuAppearance;\r\n  special1: IMenuAppearance; //right shoulder\r\n  special2: IMenuAppearance; //left shoulder\r\n  special3: IMenuAppearance;\r\n  special4: IMenuAppearance;\r\n  special5: IMenuAppearance;\r\n  special6: IMenuAppearance;\r\n  special7: IMenuAppearance;\r\n  special8: IMenuAppearance;\r\n}\r\n\r\nexport interface IDifficulty {\r\n  Normal: number;\r\n  Nightmare: number;\r\n  Hell: number;\r\n}\r\n\r\nexport interface INPC {\r\n  intro: boolean;\r\n  congrats: boolean;\r\n}\r\n\r\nexport interface INPCS {\r\n  warriv_act_ii: INPC;\r\n  charsi: INPC;\r\n  warriv_act_i: INPC;\r\n  kashya: INPC;\r\n  akara: INPC;\r\n  gheed: INPC;\r\n  greiz: INPC;\r\n  jerhyn: INPC;\r\n  meshif_act_ii: INPC;\r\n  geglash: INPC;\r\n  lysnader: INPC;\r\n  fara: INPC;\r\n  drogan: INPC;\r\n  alkor: INPC;\r\n  hratli: INPC;\r\n  ashera: INPC;\r\n  cain_act_iii: INPC;\r\n  elzix: INPC;\r\n  malah: INPC;\r\n  anya: INPC;\r\n  natalya: INPC;\r\n  meshif_act_iii: INPC;\r\n  ormus: INPC;\r\n  cain_act_v: INPC;\r\n  qualkehk: INPC;\r\n  nihlathak: INPC;\r\n}\r\n\r\nexport interface IQuest {\r\n  unk15: boolean;\r\n  unk14: boolean;\r\n  done_recently: boolean; //13\r\n  closed: boolean; //12\r\n  unk11: boolean;\r\n  unk10: boolean;\r\n  unk9: boolean;\r\n  unk8: boolean;\r\n  consumed_scroll: boolean; //7\r\n  unk6: boolean;\r\n  unk5: boolean;\r\n  unk4: boolean;\r\n  unk3: boolean;\r\n  is_received: boolean; //2\r\n  is_completed: boolean; //1\r\n  is_requirement_completed: boolean; //0\r\n}\r\n\r\nexport interface IActIQuests {\r\n  introduced: boolean;\r\n  den_of_evil: IQuest;\r\n  sisters_burial_grounds: IQuest;\r\n  tools_of_the_trade: IQuest;\r\n  the_search_for_cain: IQuest;\r\n  the_forgotten_tower: IQuest;\r\n  sisters_to_the_slaughter: IQuest;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface IActIWaypoints {\r\n  rogue_encampement: boolean;\r\n  cold_plains: boolean;\r\n  stony_field: boolean;\r\n  dark_woods: boolean;\r\n  black_marsh: boolean;\r\n  outer_cloister: boolean;\r\n  jail_lvl_1: boolean;\r\n  inner_cloister: boolean;\r\n  catacombs_lvl_2: boolean;\r\n}\r\n\r\nexport interface IActIIQuests {\r\n  introduced: boolean;\r\n  radaments_lair: IQuest;\r\n  the_horadric_staff: IQuest;\r\n  tainted_sun: IQuest;\r\n  arcane_sanctuary: IQuest;\r\n  the_summoner: IQuest;\r\n  the_seven_tombs: IQuest;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface IActIIWaypoints {\r\n  lut_gholein: boolean;\r\n  sewers_lvl_2: boolean;\r\n  dry_hills: boolean;\r\n  halls_of_the_dead_lvl_2: boolean;\r\n  far_oasis: boolean;\r\n  lost_city: boolean;\r\n  palace_cellar_lvl_1: boolean;\r\n  arcane_sanctuary: boolean;\r\n  canyon_of_the_magi: boolean;\r\n}\r\n\r\nexport interface IActIIIQuests {\r\n  introduced: boolean;\r\n  lam_esens_tome: IQuest;\r\n  khalims_will: IQuest;\r\n  blade_of_the_old_religion: IQuest;\r\n  the_golden_bird: IQuest;\r\n  the_blackened_temple: IQuest;\r\n  the_guardian: IQuest;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface IActIIIWaypoints {\r\n  kurast_docks: boolean;\r\n  spider_forest: boolean;\r\n  great_marsh: boolean;\r\n  flayer_jungle: boolean;\r\n  lower_kurast: boolean;\r\n  kurast_bazaar: boolean;\r\n  upper_kurast: boolean;\r\n  travincal: boolean;\r\n  durance_of_hate_lvl_2: boolean;\r\n}\r\n\r\nexport interface IActIVQuests {\r\n  introduced: boolean;\r\n  the_fallen_angel: IQuest;\r\n  terrors_end: IQuest;\r\n  hellforge: IQuest;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface IActIVWaypoints {\r\n  the_pandemonium_fortress: boolean;\r\n  city_of_the_damned: boolean;\r\n  river_of_flame: boolean;\r\n}\r\n\r\nexport interface IActVQuests {\r\n  introduced: boolean;\r\n  siege_on_harrogath: IQuest;\r\n  rescue_on_mount_arreat: IQuest;\r\n  prison_of_ice: IQuest;\r\n  betrayal_of_harrogath: IQuest;\r\n  rite_of_passage: IQuest;\r\n  eve_of_destruction: IQuest;\r\n  completed: boolean;\r\n}\r\n\r\nexport interface IActVWaypoints {\r\n  harrogath: boolean;\r\n  frigid_highlands: boolean;\r\n  arreat_plateau: boolean;\r\n  crystalline_passage: boolean;\r\n  halls_of_pain: boolean;\r\n  glacial_trail: boolean;\r\n  frozen_tundra: boolean;\r\n  the_ancients_way: boolean;\r\n  worldstone_keep_lvl_2: boolean;\r\n}\r\n\r\nexport interface IQuests {\r\n  act_i: IActIQuests;\r\n  act_ii: IActIIQuests;\r\n  act_iii: IActIIIQuests;\r\n  act_iv: IActIVQuests;\r\n  act_v: IActVQuests;\r\n}\r\n\r\nexport interface IWaypoints {\r\n  act_i: IActIWaypoints;\r\n  act_ii: IActIIWaypoints;\r\n  act_iii: IActIIIWaypoints;\r\n  act_iv: IActIVWaypoints;\r\n  act_v: IActVWaypoints;\r\n}\r\n\r\nexport interface INPCData {\r\n  normal: INPCS;\r\n  nm: INPCS;\r\n  hell: INPCS;\r\n}\r\n\r\nexport interface IWaypointData {\r\n  normal: IWaypoints;\r\n  nm: IWaypoints;\r\n  hell: IWaypoints;\r\n}\r\n\r\nexport interface IHeader {\r\n  identifier: string;\r\n  checksum: string;\r\n  name: string;\r\n  status: IStatus;\r\n  class: string;\r\n  created: number;\r\n  last_played: number;\r\n  menu_appearance: ICharMenuAppearance;\r\n  left_skill: string;\r\n  right_skill: string;\r\n  left_swap_skill: string;\r\n  right_swap_skill: string;\r\n  merc_id: string;\r\n  assigned_skills: string[];\r\n  quests_normal: IQuests;\r\n  quests_nm: IQuests;\r\n  quests_hell: IQuests;\r\n  waypoints: IWaypointData;\r\n  npcs: INPCData;\r\n  version: number;\r\n  filesize: number;\r\n  active_arms: number;\r\n  progression: number;\r\n  level: number;\r\n  difficulty: IDifficulty;\r\n  map_id: number;\r\n  dead_merc: number;\r\n  merc_name_id: number;\r\n  merc_type: number;\r\n  merc_experience: number;\r\n}\r\n\r\nexport interface IStatus {\r\n  expansion: boolean;\r\n  died: boolean;\r\n  hardcore: boolean;\r\n  ladder: boolean;\r\n}\r\n\r\nexport interface ISkill {\r\n  id: number;\r\n  points: number;\r\n  name: string;\r\n}\r\n\r\nexport interface IItem {\r\n  identified: number;\r\n  socketed: number;\r\n  new: number;\r\n  is_ear: number;\r\n  starter_item: number;\r\n  simple_item: number;\r\n  ethereal: number;\r\n  personalized: number;\r\n  personalized_name: string;\r\n  given_runeword: number;\r\n  version: string;\r\n  location_id: number;\r\n  equipped_id: number;\r\n  position_x: number;\r\n  position_y: number;\r\n  alt_position_id: number;\r\n  type: string;\r\n  type_id: number;\r\n  type_name: string;\r\n  quest_difficulty: number;\r\n  nr_of_items_in_sockets: number;\r\n  id: number;\r\n  level: number;\r\n  quality: number;\r\n  multiple_pictures: number;\r\n  picture_id: number;\r\n  class_specific: number;\r\n  low_quality_id: number;\r\n  timestamp: number;\r\n  ear_attributes: IEarAttributes;\r\n  defense_rating: number;\r\n  max_durability: number;\r\n  current_durability: number;\r\n  total_nr_of_sockets: number;\r\n  quantity: number;\r\n  magic_prefix: number;\r\n  magic_prefix_name: string;\r\n  magic_suffix: number;\r\n  magic_suffix_name: string;\r\n  runeword_id: number;\r\n  runeword_name: string;\r\n  runeword_attributes: IMagicProperty[];\r\n  set_id: number;\r\n  set_name: string;\r\n  set_list_count: number;\r\n  set_attributes: IMagicProperty[][];\r\n  set_attributes_num_req: number;\r\n  set_attributes_ids_req: number;\r\n  rare_name: string;\r\n  rare_name2: string;\r\n  magical_name_ids: number[] | null[];\r\n  unique_id: number;\r\n  unique_name: string;\r\n  magic_attributes: IMagicProperty[];\r\n  combined_magic_attributes: IMagicProperty[];\r\n  socketed_items: IItem[];\r\n  base_damage: IWeaponDamage;\r\n  reqstr: number;\r\n  reqdex: number;\r\n  inv_width: number;\r\n  inv_height: number;\r\n  inv_file: number;\r\n  inv_transform: number;\r\n  transform_color: string;\r\n  item_quality: EItemQuality;\r\n  categories: string[];\r\n  file_index: number;\r\n  auto_affix_id: number;\r\n  _unknown_data: {\r\n    b0_3?: Uint8Array;\r\n    b5_10?: Uint8Array;\r\n    b12?: Uint8Array;\r\n    b14_15?: Uint8Array;\r\n    b18_20?: Uint8Array;\r\n    b23?: Uint8Array;\r\n    b25?: Uint8Array;\r\n    b27_31?: Uint8Array;\r\n    plist_flag?: number;\r\n  };\r\n  rare_name_id: number;\r\n  rare_name_id2: number;\r\n  displayed_magic_attributes: IMagicProperty[];\r\n  displayed_runeword_attributes: IMagicProperty[];\r\n  displayed_combined_magic_attributes: IMagicProperty[];\r\n}\r\n\r\nexport interface IWeaponDamage {\r\n  mindam: number;\r\n  maxdam: number;\r\n  twohandmindam: number;\r\n  twohandmaxdam: number;\r\n}\r\n\r\nexport interface IEarAttributes {\r\n  class: number;\r\n  level: number;\r\n  name: string;\r\n}\r\n\r\nexport interface IMagicProperty {\r\n  id: number;\r\n  name: string;\r\n  values: number[];\r\n  df?: number,\r\n  value?: number,\r\n  param?:number,\r\n  so?:number,\r\n  description?: string;\r\n  visible?: boolean;\r\n  op_value?: number;\r\n  op_stats?: string[];\r\n}\r\n\r\nexport enum EStashType {\r\n  shared,\r\n  private,\r\n}\r\n\r\nexport interface IStash {\r\n  version: string;\r\n  type: EStashType;\r\n  pageCount: number;\r\n  sharedGold: number;\r\n  hardcore: boolean;\r\n  pages: IStashPage[];\r\n}\r\n\r\nexport interface IStashPage {\r\n  name: string;\r\n  type: number;\r\n  items: IItem[];\r\n}\r\n\r\nexport enum EItemQuality {\r\n  normal,\r\n  exceptional,\r\n  elite,\r\n}\r\n\r\nexport enum Quality {\r\n  Low = 0x01,\r\n  Normal = 0x02,\r\n  Superior = 0x03,\r\n  Magic = 0x04,\r\n  Set = 0x05,\r\n  Rare = 0x06,\r\n  Unique = 0x07,\r\n  Crafted = 0x08,\r\n}\r\n\r\nexport enum ItemType {\r\n  Armor = 0x01,\r\n  Shield = 0x02, //treated the same as armor... only here to be able to parse nokkas jsons\r\n  Weapon = 0x03,\r\n  Other = 0x04,\r\n}\r\n","import * as types from \"../types\";\r\nimport { BitReader } from \"../../binary/bitreader\";\r\nimport { BitWriter } from \"../../binary/bitwriter\";\r\n\r\nconst difficulties = [\"normal\", \"nm\", \"hell\"];\r\n\r\nexport function readHeader(char: types.ID2S, reader: BitReader, constants: types.IConstantData) {\r\n  char.header.filesize = reader.ReadUInt32(); //0x0008\r\n  char.header.checksum = reader.ReadUInt32().toString(16).padStart(8, \"0\"); //0x000c\r\n  reader.SkipBytes(4); //0x0010\r\n  if (char.header.version > 0x61) {\r\n    reader.SeekByte(267);\r\n  }\r\n  char.header.name = reader.ReadString(16).replace(/\\0/g, \"\"); //0x0014\r\n  if (char.header.version > 0x61) {\r\n    reader.SeekByte(36);\r\n  }\r\n  char.header.status = _readStatus(reader.ReadUInt8()); //0x0024\r\n  char.header.progression = reader.ReadUInt8(); //0x0025\r\n  char.header.active_arms = reader.ReadUInt16(); //0x0026 [unk = 0x0, 0x0]\r\n  char.header.class = constants.classes[reader.ReadUInt8()]!.n; //0x0028\r\n  reader.SkipBytes(2); //0x0029 [unk = 0x10, 0x1E]\r\n  char.header.level = reader.ReadUInt8(); //0x002b\r\n  char.header.created = reader.ReadUInt32(); //0x002c\r\n  char.header.last_played = reader.ReadUInt32(); //0x0030\r\n  reader.SkipBytes(4); //0x0034 [unk = 0xff, 0xff, 0xff, 0xff]\r\n  char.header.assigned_skills = _readAssignedSkills(reader.ReadArray(64), constants); //0x0038\r\n  char.header.left_skill = constants.skills[reader.ReadUInt32()]?.s; //0x0078\r\n  char.header.right_skill = constants.skills[reader.ReadUInt32()]?.s; //0x007c\r\n  char.header.left_swap_skill = constants.skills[reader.ReadUInt32()]?.s; //0x0080\r\n  char.header.right_swap_skill = constants.skills[reader.ReadUInt32()]?.s; //0x0084\r\n  char.header.menu_appearance = _readCharMenuAppearance(reader.ReadArray(32), constants); //0x0088 [char menu appearance]\r\n  char.header.difficulty = _readDifficulty(reader.ReadArray(3)); //0x00a8\r\n  char.header.map_id = reader.ReadUInt32(); //0x00ab\r\n  reader.SkipBytes(2); //0x00af [unk = 0x0, 0x0]\r\n  char.header.dead_merc = reader.ReadUInt16(); //0x00b1\r\n  char.header.merc_id = reader.ReadUInt32().toString(16); //0x00b3\r\n  char.header.merc_name_id = reader.ReadUInt16(); //0x00b7\r\n  char.header.merc_type = reader.ReadUInt16(); //0x00b9\r\n  char.header.merc_experience = reader.ReadUInt32(); //0x00bb\r\n  reader.SkipBytes(144); //0x00bf [unk]\r\n  reader.SkipBytes(4); //0x014f [quests header identifier = 0x57, 0x6f, 0x6f, 0x21 \"Woo!\"]\r\n  reader.SkipBytes(4); //0x0153 [version = 0x6, 0x0, 0x0, 0x0]\r\n  reader.SkipBytes(2); //0x0153 [quests header length = 0x2a, 0x1]\r\n  char.header.quests_normal = _readQuests(reader.ReadArray(96)); //0x0159\r\n  char.header.quests_nm = _readQuests(reader.ReadArray(96)); //0x01b9\r\n  char.header.quests_hell = _readQuests(reader.ReadArray(96)); //0x0219\r\n  reader.SkipBytes(2); //0x0279 [waypoint header identifier = 0x57, 0x53 \"WS\"]\r\n  reader.SkipBytes(4); //0x027b [waypoint header version = 0x1, 0x0, 0x0, 0x0]\r\n  reader.SkipBytes(2); //0x027f [waypoint header length = 0x50, 0x0]\r\n  char.header.waypoints = _readWaypointData(reader.ReadArray(0x48)); //0x0281\r\n  reader.SkipBytes(2); //0x02c9 [npc header identifier  = 0x01, 0x77 \".w\"]\r\n  reader.SkipBytes(2); //0x02ca [npc header length = 0x34]\r\n  char.header.npcs = _readNPCData(reader.ReadArray(0x30)); //0x02cc\r\n}\r\n\r\nexport function writeHeader(char: types.ID2S, writer: BitWriter, constants: types.IConstantData) {\r\n  writer\r\n    .WriteUInt32(0x0) //0x0008 (filesize. needs to be writen after all data)\r\n    .WriteUInt32(0x0); //0x000c (checksum. needs to be calculated after all data writer)\r\n\r\n  if (char.header.version > 0x61) {\r\n    writer.WriteArray(new Uint8Array(Array(20).fill(0))); // 0x0010\r\n  } else {\r\n    writer\r\n      .WriteArray(new Uint8Array([0x00, 0x00, 0x00, 0x00])) //0x0010\r\n      .WriteString(char.header.name, 16); //0x0014\r\n  }\r\n\r\n  writer\r\n    .WriteArray(_writeStatus(char.header.status)) //0x0024\r\n    .WriteUInt8(char.header.progression) //0x0025\r\n    .WriteUInt16(char.header.active_arms) //0x0026\r\n    .WriteUInt8(_classId(char.header.class, constants)) //0x0028\r\n    .WriteArray(new Uint8Array([0x10, 0x1e])) //0x0029\r\n    .WriteUInt8(char.header.level) //0x002b\r\n    .WriteArray(new Uint8Array([0x00, 0x00, 0x00, 0x00])) //0x002c\r\n    .WriteUInt32(char.header.last_played) //0x0030\r\n    .WriteArray(new Uint8Array([0xff, 0xff, 0xff, 0xff])) //0x0034\r\n    .WriteArray(_writeAssignedSkills(char.header.assigned_skills, constants)) //0x0038\r\n    .WriteUInt32(_skillId(char.header.left_skill, constants)) //0x0078\r\n    .WriteUInt32(_skillId(char.header.right_skill, constants)) //0x007c\r\n    .WriteUInt32(_skillId(char.header.left_swap_skill, constants)) //0x0080\r\n    .WriteUInt32(_skillId(char.header.right_swap_skill, constants)) //0x0084\r\n    .WriteArray(_writeCharMenuAppearance(char.header.menu_appearance, constants)) //0x0088 [char menu appearance]\r\n    .WriteArray(_writeDifficulty(char.header.difficulty)) //0x00a8\r\n    .WriteUInt32(char.header.map_id) //0x00ab\r\n    .WriteArray(new Uint8Array([0x00, 0x00])) //0x00af [unk = 0x0, 0x0]\r\n    .WriteUInt16(char.header.dead_merc) //0x00b1\r\n    .WriteUInt32(parseInt(char.header.merc_id, 16)) //0x00b3\r\n    .WriteUInt16(char.header.merc_name_id) //0x00b7\r\n    .WriteUInt16(char.header.merc_type) //0x00b9\r\n    .WriteUInt32(char.header.merc_experience); //0x00bb\r\n\r\n  if (char.header.version > 0x61) {\r\n    writer\r\n      .WriteArray(new Uint8Array(76)) //0x00bf [unk]\r\n      .WriteString(char.header.name, 16) //0x010b\r\n      .WriteArray(new Uint8Array(52)); //0x011b [unk]\r\n  } else {\r\n    writer\r\n      .WriteArray(new Uint8Array(140)) //0x00bf [unk]\r\n      .WriteUInt32(0x1); //0x014b [unk = 0x1, 0x0, 0x0, 0x0]\r\n  }\r\n\r\n  writer\r\n    .WriteString(\"Woo!\", 4) //0x014f [quests = 0x57, 0x6f, 0x6f, 0x21 \"Woo!\"]\r\n    .WriteArray(new Uint8Array([0x06, 0x00, 0x00, 0x00, 0x2a, 0x01])) //0x0153 [unk = 0x6, 0x0, 0x0, 0x0, 0x2a, 0x1]\r\n    .WriteArray(_writeQuests(char.header.quests_normal)) //0x0159\r\n    .WriteArray(_writeQuests(char.header.quests_nm)) //0x01b9\r\n    .WriteArray(_writeQuests(char.header.quests_hell)) //0x0219\r\n    .WriteString(\"WS\", 2) //0x0279 [waypoint data = 0x57, 0x53 \"WS\"]\r\n    .WriteArray(new Uint8Array([0x01, 0x00, 0x00, 0x00, 0x50, 0x00])) //0x027b [unk = 0x1, 0x0, 0x0, 0x0, 0x50, 0x0]\r\n    .WriteArray(_writeWaypointData(char.header.waypoints)) //0x0281\r\n    .WriteArray(new Uint8Array([0x01, 0x77])) //0x02c9 [npc header = 0x01, 0x77 \".w\"]\r\n    .WriteUInt16(0x34) //0x02ca [npc struct length]\r\n    .WriteArray(_writeNPCData(char.header.npcs)); //0x02cc [npc introduction data... unk]\r\n}\r\n\r\nfunction _classId(name: string, constants: types.IConstantData): number {\r\n  if (!name) return -1;\r\n  return constants.classes.findIndex((c) => c && c.n == name);\r\n}\r\n\r\nfunction _skillId(name: string, constants: types.IConstantData): number {\r\n  //default to \"attack\" if empty string or can't find spellname.\r\n  if (name === \"\") return 0;\r\n  if (!name) return -1;\r\n  const idx = constants.skills.findIndex((s) => s && s.s == name);\r\n  return idx >= 0 ? idx : 0;\r\n}\r\n\r\nfunction _readStatus(byte: number): types.IStatus {\r\n  const status = {} as types.IStatus;\r\n  status.hardcore = ((byte >>> 2) & 1) === 1;\r\n  status.died = ((byte >>> 3) & 1) === 1;\r\n  status.expansion = ((byte >>> 5) & 1) === 1;\r\n  status.ladder = ((byte >>> 6) & 1) === 1;\r\n  return status;\r\n}\r\n\r\nfunction _writeStatus(status: types.IStatus): Uint8Array {\r\n  const arr = new Uint8Array(1);\r\n  arr[0] |= status.hardcore ? 1 << 2 : 0;\r\n  arr[0] |= status.died ? 1 << 3 : 0;\r\n  arr[0] |= status.expansion ? 1 << 5 : 0;\r\n  arr[0] |= status.ladder ? 1 << 6 : 0;\r\n  return arr;\r\n}\r\n\r\nfunction _readCharMenuAppearance(bytes: Uint8Array, constants: types.IConstantData): types.ICharMenuAppearance {\r\n  const appearance = {} as types.ICharMenuAppearance;\r\n  const reader = new BitReader(bytes);\r\n  const graphics = reader.ReadArray(16);\r\n  const tints = reader.ReadArray(16);\r\n  appearance.head = { graphic: graphics[0], tint: tints[0] } as types.IMenuAppearance;\r\n  appearance.torso = { graphic: graphics[1], tint: tints[1] } as types.IMenuAppearance;\r\n  appearance.legs = { graphic: graphics[2], tint: tints[2] } as types.IMenuAppearance;\r\n  appearance.right_arm = { graphic: graphics[3], tint: tints[3] } as types.IMenuAppearance;\r\n  appearance.left_arm = { graphic: graphics[4], tint: tints[4] } as types.IMenuAppearance;\r\n  appearance.right_hand = { graphic: graphics[5], tint: tints[5] } as types.IMenuAppearance;\r\n  appearance.left_hand = { graphic: graphics[6], tint: tints[6] } as types.IMenuAppearance;\r\n  appearance.shield = { graphic: graphics[7], tint: tints[7] } as types.IMenuAppearance;\r\n  appearance.special1 = { graphic: graphics[8], tint: tints[8] } as types.IMenuAppearance;\r\n  appearance.special2 = { graphic: graphics[9], tint: tints[9] } as types.IMenuAppearance;\r\n  appearance.special3 = { graphic: graphics[10], tint: tints[10] } as types.IMenuAppearance;\r\n  appearance.special4 = { graphic: graphics[11], tint: tints[11] } as types.IMenuAppearance;\r\n  appearance.special5 = { graphic: graphics[12], tint: tints[12] } as types.IMenuAppearance;\r\n  appearance.special6 = { graphic: graphics[13], tint: tints[13] } as types.IMenuAppearance;\r\n  appearance.special7 = { graphic: graphics[14], tint: tints[14] } as types.IMenuAppearance;\r\n  appearance.special8 = { graphic: graphics[15], tint: tints[15] } as types.IMenuAppearance;\r\n  return appearance;\r\n}\r\n\r\nfunction _writeCharMenuAppearance(appearance: types.ICharMenuAppearance, constants: types.IConstantData): Uint8Array {\r\n  const writer = new BitWriter(32);\r\n  writer.length = 32 * 8;\r\n\r\n  const graphics: number[] = [];\r\n  graphics.push(appearance && appearance.head ? appearance.head.graphic : 0);\r\n  graphics.push(appearance && appearance.torso ? appearance.torso.graphic : 0);\r\n  graphics.push(appearance && appearance.legs ? appearance.legs.graphic : 0);\r\n  graphics.push(appearance && appearance.right_arm ? appearance.right_arm.graphic : 0);\r\n  graphics.push(appearance && appearance.left_arm ? appearance.left_arm.graphic : 0);\r\n  graphics.push(appearance && appearance.right_hand ? appearance.right_hand.graphic : 0);\r\n  graphics.push(appearance && appearance.left_hand ? appearance.left_hand.graphic : 0);\r\n  graphics.push(appearance && appearance.shield ? appearance.shield.graphic : 0);\r\n  graphics.push(appearance && appearance.special1 ? appearance.special1.graphic : 0);\r\n  graphics.push(appearance && appearance.special2 ? appearance.special2.graphic : 0);\r\n  graphics.push(appearance && appearance.special3 ? appearance.special3.graphic : 0);\r\n  graphics.push(appearance && appearance.special4 ? appearance.special4.graphic : 0);\r\n  graphics.push(appearance && appearance.special5 ? appearance.special5.graphic : 0);\r\n  graphics.push(appearance && appearance.special6 ? appearance.special6.graphic : 0);\r\n  graphics.push(appearance && appearance.special7 ? appearance.special7.graphic : 0);\r\n  graphics.push(appearance && appearance.special8 ? appearance.special8.graphic : 0);\r\n\r\n  for (const g of graphics) {\r\n    writer.WriteUInt8(g);\r\n  }\r\n\r\n  const tints: number[] = [];\r\n  tints.push(appearance && appearance.head ? appearance.head.tint : 0);\r\n  tints.push(appearance && appearance.torso ? appearance.torso.tint : 0);\r\n  tints.push(appearance && appearance.legs ? appearance.legs.tint : 0);\r\n  tints.push(appearance && appearance.right_arm ? appearance.right_arm.tint : 0);\r\n  tints.push(appearance && appearance.left_arm ? appearance.left_arm.tint : 0);\r\n  tints.push(appearance && appearance.right_hand ? appearance.right_hand.tint : 0);\r\n  tints.push(appearance && appearance.left_hand ? appearance.left_hand.tint : 0);\r\n  tints.push(appearance && appearance.shield ? appearance.shield.tint : 0);\r\n  tints.push(appearance && appearance.special1 ? appearance.special1.tint : 0);\r\n  tints.push(appearance && appearance.special2 ? appearance.special2.tint : 0);\r\n  tints.push(appearance && appearance.special3 ? appearance.special3.tint : 0);\r\n  tints.push(appearance && appearance.special4 ? appearance.special4.tint : 0);\r\n  tints.push(appearance && appearance.special5 ? appearance.special5.tint : 0);\r\n  tints.push(appearance && appearance.special6 ? appearance.special6.tint : 0);\r\n  tints.push(appearance && appearance.special7 ? appearance.special7.tint : 0);\r\n  tints.push(appearance && appearance.special8 ? appearance.special8.tint : 0);\r\n\r\n  for (const t of tints) {\r\n    writer.WriteUInt8(t);\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readAssignedSkills(bytes: Uint8Array, constants: types.IConstantData): string[] {\r\n  const skills = [] as string[];\r\n  const reader = new BitReader(bytes);\r\n  for (let i = 0; i < 16; i++) {\r\n    const skillId = reader.ReadUInt32();\r\n    const skill = constants.skills[skillId];\r\n    if (skill) {\r\n      skills.push(skill.s);\r\n    }\r\n  }\r\n  return skills;\r\n}\r\n\r\nfunction _writeAssignedSkills(skills: string[], constants: types.IConstantData): Uint8Array {\r\n  const writer = new BitWriter(64);\r\n  writer.length = 64 * 8;\r\n  skills = skills || [];\r\n  for (let i = 0; i < 16; i++) {\r\n    const skillId = _skillId(skills[i], constants);\r\n    if (skillId > 0) {\r\n      writer.WriteUInt32(skillId);\r\n    } else {\r\n      writer.WriteUInt32(0xffff);\r\n    }\r\n  }\r\n\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readDifficulty(bytes: Uint8Array): types.IDifficulty {\r\n  const difficulty = {} as types.IDifficulty;\r\n  difficulty.Normal = bytes[0];\r\n  difficulty.Nightmare = bytes[1];\r\n  difficulty.Hell = bytes[2];\r\n  return difficulty;\r\n}\r\n\r\nfunction _writeDifficulty(difficulty: types.IDifficulty): Uint8Array {\r\n  const writer = new BitWriter(3);\r\n  writer.length = 3 * 8;\r\n  writer.WriteUInt8(difficulty.Normal);\r\n  writer.WriteUInt8(difficulty.Nightmare);\r\n  writer.WriteUInt8(difficulty.Hell);\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readQuests(bytes: Uint8Array): types.IQuests {\r\n  const quests = {} as types.IQuests;\r\n  const reader = new BitReader(bytes);\r\n  quests.act_i = {} as types.IActIQuests;\r\n  quests.act_i.introduced = reader.ReadUInt16() === 0x1; //0x0000\r\n  quests.act_i.den_of_evil = _readQuest(reader.ReadArray(2)); //0x0002\r\n  quests.act_i.sisters_burial_grounds = _readQuest(reader.ReadArray(2));\r\n  quests.act_i.tools_of_the_trade = _readQuest(reader.ReadArray(2));\r\n  quests.act_i.the_search_for_cain = _readQuest(reader.ReadArray(2));\r\n  quests.act_i.the_forgotten_tower = _readQuest(reader.ReadArray(2));\r\n  quests.act_i.sisters_to_the_slaughter = _readQuest(reader.ReadArray(2));\r\n  quests.act_i.completed = reader.ReadUInt16() === 0x1;\r\n  quests.act_ii = {} as types.IActIIQuests;\r\n  quests.act_ii.introduced = reader.ReadUInt16() === 0x1; //0x0010 [if jerhyn introduction = 0x01]\r\n  quests.act_ii.radaments_lair = _readQuest(reader.ReadArray(2)); //0x0012\r\n  quests.act_ii.the_horadric_staff = _readQuest(reader.ReadArray(2));\r\n  quests.act_ii.tainted_sun = _readQuest(reader.ReadArray(2));\r\n  quests.act_ii.arcane_sanctuary = _readQuest(reader.ReadArray(2));\r\n  quests.act_ii.the_summoner = _readQuest(reader.ReadArray(2));\r\n  quests.act_ii.the_seven_tombs = _readQuest(reader.ReadArray(2));\r\n  quests.act_ii.completed = reader.ReadUInt16() === 0x1; //0x001e\r\n  quests.act_iii = {} as types.IActIIIQuests;\r\n  quests.act_iii.introduced = reader.ReadUInt16() === 0x1; //0x0020 [if hratli introduction = 0x01]\r\n  quests.act_iii.lam_esens_tome = _readQuest(reader.ReadArray(2)); //0x0022\r\n  quests.act_iii.khalims_will = _readQuest(reader.ReadArray(2));\r\n  quests.act_iii.blade_of_the_old_religion = _readQuest(reader.ReadArray(2));\r\n  quests.act_iii.the_golden_bird = _readQuest(reader.ReadArray(2));\r\n  quests.act_iii.the_blackened_temple = _readQuest(reader.ReadArray(2));\r\n  quests.act_iii.the_guardian = _readQuest(reader.ReadArray(2));\r\n  quests.act_iii.completed = reader.ReadUInt16() === 0x1; //0x002e\r\n  quests.act_iv = {} as types.IActIVQuests;\r\n  quests.act_iv.introduced = reader.ReadUInt16() === 0x1; //0x0030 [if activ introduction = 0x01]\r\n  quests.act_iv.the_fallen_angel = _readQuest(reader.ReadArray(2)); //0x0032\r\n  quests.act_iv.terrors_end = _readQuest(reader.ReadArray(2));\r\n  quests.act_iv.hellforge = _readQuest(reader.ReadArray(2));\r\n  quests.act_iv.completed = reader.ReadUInt16() === 0x1; //0x0038\r\n  reader.SkipBytes(10); //0x003a\r\n  quests.act_v = {} as types.IActVQuests;\r\n  quests.act_v.introduced = reader.ReadUInt16() === 0x1;\r\n  quests.act_v.siege_on_harrogath = _readQuest(reader.ReadArray(2)); //0x0046\r\n  quests.act_v.rescue_on_mount_arreat = _readQuest(reader.ReadArray(2));\r\n  quests.act_v.prison_of_ice = _readQuest(reader.ReadArray(2));\r\n  quests.act_v.betrayal_of_harrogath = _readQuest(reader.ReadArray(2));\r\n  quests.act_v.rite_of_passage = _readQuest(reader.ReadArray(2));\r\n  quests.act_v.eve_of_destruction = _readQuest(reader.ReadArray(2));\r\n  quests.act_v.completed = reader.ReadUInt16() === 0x1;\r\n  reader.SkipBytes(12);\r\n  return quests; //sizeof [0x0060]\r\n}\r\n\r\nfunction _writeQuests(quests: types.IQuests): Uint8Array {\r\n  const writer = new BitWriter(96);\r\n  writer.length = 96 * 8;\r\n  const difficultyCompleted = +quests.act_v.completed || +quests.act_v.eve_of_destruction.is_completed;\r\n  return writer\r\n    .WriteUInt16(+quests.act_i.introduced)\r\n    .WriteArray(_writeQuest(quests.act_i.den_of_evil))\r\n    .WriteArray(_writeQuest(quests.act_i.sisters_burial_grounds))\r\n    .WriteArray(_writeQuest(quests.act_i.tools_of_the_trade))\r\n    .WriteArray(_writeQuest(quests.act_i.the_search_for_cain))\r\n    .WriteArray(_writeQuest(quests.act_i.the_forgotten_tower))\r\n    .WriteArray(_writeQuest(quests.act_i.sisters_to_the_slaughter))\r\n    .WriteUInt16(+quests.act_i.completed || +quests.act_i.sisters_to_the_slaughter.is_completed)\r\n    .WriteUInt16(+quests.act_ii.introduced || +quests.act_i.sisters_to_the_slaughter.is_completed)\r\n    .WriteArray(_writeQuest(quests.act_ii.radaments_lair))\r\n    .WriteArray(_writeQuest(quests.act_ii.the_horadric_staff))\r\n    .WriteArray(_writeQuest(quests.act_ii.tainted_sun))\r\n    .WriteArray(_writeQuest(quests.act_ii.arcane_sanctuary))\r\n    .WriteArray(_writeQuest(quests.act_ii.the_summoner))\r\n    .WriteArray(_writeQuest(quests.act_ii.the_seven_tombs))\r\n    .WriteUInt16(+quests.act_ii.completed || +quests.act_ii.the_seven_tombs.is_completed)\r\n    .WriteUInt16(+quests.act_iii.introduced || +quests.act_ii.the_seven_tombs.is_completed)\r\n    .WriteArray(_writeQuest(quests.act_iii.lam_esens_tome))\r\n    .WriteArray(_writeQuest(quests.act_iii.khalims_will))\r\n    .WriteArray(_writeQuest(quests.act_iii.blade_of_the_old_religion))\r\n    .WriteArray(_writeQuest(quests.act_iii.the_golden_bird))\r\n    .WriteArray(_writeQuest(quests.act_iii.the_blackened_temple))\r\n    .WriteArray(_writeQuest(quests.act_iii.the_guardian))\r\n    .WriteUInt16(+quests.act_iii.completed || +quests.act_iii.the_guardian.is_completed)\r\n    .WriteUInt16(+quests.act_iv.introduced || +quests.act_iii.the_guardian.is_completed)\r\n    .WriteArray(_writeQuest(quests.act_iv.the_fallen_angel))\r\n    .WriteArray(_writeQuest(quests.act_iv.terrors_end))\r\n    .WriteArray(_writeQuest(quests.act_iv.hellforge))\r\n    .WriteUInt16(+quests.act_iv.completed || +quests.act_iv.terrors_end.is_completed)\r\n    .WriteArray(new Uint8Array(6))\r\n    .WriteUInt16(+quests.act_v.introduced || +quests.act_iv.terrors_end.is_completed)\r\n    .WriteArray(new Uint8Array(4))\r\n    .WriteArray(_writeQuest(quests.act_v.siege_on_harrogath))\r\n    .WriteArray(_writeQuest(quests.act_v.rescue_on_mount_arreat))\r\n    .WriteArray(_writeQuest(quests.act_v.prison_of_ice))\r\n    .WriteArray(_writeQuest(quests.act_v.betrayal_of_harrogath))\r\n    .WriteArray(_writeQuest(quests.act_v.rite_of_passage))\r\n    .WriteArray(_writeQuest(quests.act_v.eve_of_destruction))\r\n    .WriteUInt8(difficultyCompleted)\r\n    .WriteUInt8(difficultyCompleted ? 0x80 : 0x0) //is this right?\r\n    .WriteArray(new Uint8Array(12))\r\n    .ToArray();\r\n}\r\n\r\nfunction _readQuest(bytes: Uint8Array): types.IQuest {\r\n  const quest = {} as types.IQuest;\r\n  const reader = new BitReader(bytes);\r\n  quest.is_completed = reader.ReadBit() === 1;\r\n  quest.is_requirement_completed = reader.ReadBit() === 1;\r\n  quest.is_received = reader.ReadBit() === 1;\r\n  if (reader.ReadBit() === 1) quest.unk3 = true;\r\n  if (reader.ReadBit() === 1) quest.unk4 = true;\r\n  if (reader.ReadBit() === 1) quest.unk5 = true;\r\n  if (reader.ReadBit() === 1) quest.unk6 = true;\r\n  if (reader.ReadBit() === 1) quest.consumed_scroll = true;\r\n  if (reader.ReadBit() === 1) quest.unk8 = true;\r\n  if (reader.ReadBit() === 1) quest.unk9 = true;\r\n  if (reader.ReadBit() === 1) quest.unk10 = true;\r\n  if (reader.ReadBit() === 1) quest.unk11 = true;\r\n  quest.closed = reader.ReadBit() === 1;\r\n  quest.done_recently = reader.ReadBit() === 1;\r\n  if (reader.ReadBit() === 1) quest.unk14 = true;\r\n  if (reader.ReadBit() === 1) quest.unk15 = true;\r\n  return quest;\r\n}\r\n\r\nfunction _writeQuest(quest: types.IQuest): Uint8Array {\r\n  const writer = new BitWriter(2);\r\n  writer.length = 2 * 8;\r\n  writer.WriteBit(+quest.is_completed);\r\n  writer.WriteBit(+quest.is_requirement_completed);\r\n  writer.WriteBit(+quest.is_received);\r\n  writer.WriteBit(+quest.unk3);\r\n  writer.WriteBit(+quest.unk4);\r\n  writer.WriteBit(+quest.unk5);\r\n  writer.WriteBit(+quest.unk6);\r\n  writer.WriteBit(+quest.consumed_scroll);\r\n  writer.WriteBit(+quest.unk8);\r\n  writer.WriteBit(+quest.unk9);\r\n  writer.WriteBit(+quest.unk10);\r\n  writer.WriteBit(+quest.unk11);\r\n  writer.WriteBit(+quest.closed);\r\n  writer.WriteBit(+quest.done_recently);\r\n  writer.WriteBit(+quest.unk14);\r\n  writer.WriteBit(+quest.unk15);\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readWaypointData(bytes: Uint8Array): types.IWaypointData {\r\n  const waypoints = {} as types.IWaypointData;\r\n  const reader = new BitReader(bytes);\r\n  for (let i = 0; i < difficulties.length; i++) {\r\n    waypoints[difficulties[i]] = _readWaypoints(reader.ReadArray(24));\r\n  }\r\n  return waypoints;\r\n}\r\n\r\nfunction _readWaypoints(bytes: Uint8Array): types.IWaypoints {\r\n  const waypoints = {} as types.IWaypoints;\r\n  const reader = new BitReader(bytes);\r\n  reader.SkipBytes(2); //unk = 0x2, 0x\r\n  waypoints.act_i = {} as types.IActIWaypoints;\r\n  waypoints.act_i.rogue_encampement = reader.ReadBit() === 1;\r\n  waypoints.act_i.cold_plains = reader.ReadBit() === 1;\r\n  waypoints.act_i.stony_field = reader.ReadBit() === 1;\r\n  waypoints.act_i.dark_woods = reader.ReadBit() === 1;\r\n  waypoints.act_i.black_marsh = reader.ReadBit() === 1;\r\n  waypoints.act_i.outer_cloister = reader.ReadBit() === 1;\r\n  waypoints.act_i.jail_lvl_1 = reader.ReadBit() === 1;\r\n  waypoints.act_i.inner_cloister = reader.ReadBit() === 1;\r\n  waypoints.act_i.catacombs_lvl_2 = reader.ReadBit() === 1;\r\n  waypoints.act_ii = {} as types.IActIIWaypoints;\r\n  waypoints.act_ii.lut_gholein = reader.ReadBit() === 1;\r\n  waypoints.act_ii.sewers_lvl_2 = reader.ReadBit() === 1;\r\n  waypoints.act_ii.dry_hills = reader.ReadBit() === 1;\r\n  waypoints.act_ii.halls_of_the_dead_lvl_2 = reader.ReadBit() === 1;\r\n  waypoints.act_ii.far_oasis = reader.ReadBit() === 1;\r\n  waypoints.act_ii.lost_city = reader.ReadBit() === 1;\r\n  waypoints.act_ii.palace_cellar_lvl_1 = reader.ReadBit() === 1;\r\n  waypoints.act_ii.arcane_sanctuary = reader.ReadBit() === 1;\r\n  waypoints.act_ii.canyon_of_the_magi = reader.ReadBit() === 1;\r\n  waypoints.act_iii = {} as types.IActIIIWaypoints;\r\n  waypoints.act_iii.kurast_docks = reader.ReadBit() === 1;\r\n  waypoints.act_iii.spider_forest = reader.ReadBit() === 1;\r\n  waypoints.act_iii.great_marsh = reader.ReadBit() === 1;\r\n  waypoints.act_iii.flayer_jungle = reader.ReadBit() === 1;\r\n  waypoints.act_iii.lower_kurast = reader.ReadBit() === 1;\r\n  waypoints.act_iii.kurast_bazaar = reader.ReadBit() === 1;\r\n  waypoints.act_iii.upper_kurast = reader.ReadBit() === 1;\r\n  waypoints.act_iii.travincal = reader.ReadBit() === 1;\r\n  waypoints.act_iii.durance_of_hate_lvl_2 = reader.ReadBit() === 1;\r\n  waypoints.act_iv = {} as types.IActIVWaypoints;\r\n  waypoints.act_iv.the_pandemonium_fortress = reader.ReadBit() === 1;\r\n  waypoints.act_iv.city_of_the_damned = reader.ReadBit() === 1;\r\n  waypoints.act_iv.river_of_flame = reader.ReadBit() === 1;\r\n  waypoints.act_v = {} as types.IActVWaypoints;\r\n  waypoints.act_v.harrogath = reader.ReadBit() === 1;\r\n  waypoints.act_v.frigid_highlands = reader.ReadBit() === 1;\r\n  waypoints.act_v.arreat_plateau = reader.ReadBit() === 1;\r\n  waypoints.act_v.crystalline_passage = reader.ReadBit() === 1;\r\n  waypoints.act_v.halls_of_pain = reader.ReadBit() === 1;\r\n  waypoints.act_v.glacial_trail = reader.ReadBit() === 1;\r\n  waypoints.act_v.frozen_tundra = reader.ReadBit() === 1;\r\n  waypoints.act_v.the_ancients_way = reader.ReadBit() === 1;\r\n  waypoints.act_v.worldstone_keep_lvl_2 = reader.ReadBit() === 1;\r\n  reader.Align().SkipBytes(17);\r\n  return waypoints;\r\n}\r\n\r\nfunction _writeWaypointData(waypoints: types.IWaypointData): Uint8Array {\r\n  const writer = new BitWriter(72);\r\n  writer.length = 72 * 8;\r\n  for (let i = 0; i < difficulties.length; i++) {\r\n    const w = waypoints != null ? waypoints[difficulties[i]] : null;\r\n    writer.WriteArray(_writeWaypoints(w));\r\n  }\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _writeWaypoints(waypoints: types.IWaypoints): Uint8Array {\r\n  const writer = new BitWriter(24);\r\n  writer.length = 24 * 8;\r\n  writer.WriteArray(new Uint8Array([0x02, 0x01]));\r\n  if (waypoints) {\r\n    if (waypoints.act_i) {\r\n      writer.WriteBit(+waypoints.act_i.rogue_encampement);\r\n      writer.WriteBit(+waypoints.act_i.cold_plains);\r\n      writer.WriteBit(+waypoints.act_i.stony_field);\r\n      writer.WriteBit(+waypoints.act_i.dark_woods);\r\n      writer.WriteBit(+waypoints.act_i.black_marsh);\r\n      writer.WriteBit(+waypoints.act_i.outer_cloister);\r\n      writer.WriteBit(+waypoints.act_i.jail_lvl_1);\r\n      writer.WriteBit(+waypoints.act_i.inner_cloister);\r\n      writer.WriteBit(+waypoints.act_i.catacombs_lvl_2);\r\n    }\r\n    if (waypoints.act_ii) {\r\n      writer.WriteBit(+waypoints.act_ii.lut_gholein);\r\n      writer.WriteBit(+waypoints.act_ii.sewers_lvl_2);\r\n      writer.WriteBit(+waypoints.act_ii.dry_hills);\r\n      writer.WriteBit(+waypoints.act_ii.halls_of_the_dead_lvl_2);\r\n      writer.WriteBit(+waypoints.act_ii.far_oasis);\r\n      writer.WriteBit(+waypoints.act_ii.lost_city);\r\n      writer.WriteBit(+waypoints.act_ii.palace_cellar_lvl_1);\r\n      writer.WriteBit(+waypoints.act_ii.arcane_sanctuary);\r\n      writer.WriteBit(+waypoints.act_ii.canyon_of_the_magi);\r\n    }\r\n    if (waypoints.act_iii) {\r\n      writer.WriteBit(+waypoints.act_iii.kurast_docks);\r\n      writer.WriteBit(+waypoints.act_iii.spider_forest);\r\n      writer.WriteBit(+waypoints.act_iii.great_marsh);\r\n      writer.WriteBit(+waypoints.act_iii.flayer_jungle);\r\n      writer.WriteBit(+waypoints.act_iii.lower_kurast);\r\n      writer.WriteBit(+waypoints.act_iii.kurast_bazaar);\r\n      writer.WriteBit(+waypoints.act_iii.upper_kurast);\r\n      writer.WriteBit(+waypoints.act_iii.travincal);\r\n      writer.WriteBit(+waypoints.act_iii.durance_of_hate_lvl_2);\r\n    }\r\n    if (waypoints.act_iv) {\r\n      writer.WriteBit(+waypoints.act_iv.the_pandemonium_fortress);\r\n      writer.WriteBit(+waypoints.act_iv.city_of_the_damned);\r\n      writer.WriteBit(+waypoints.act_iv.river_of_flame);\r\n    }\r\n    if (waypoints.act_v) {\r\n      writer.WriteBit(+waypoints.act_v.harrogath);\r\n      writer.WriteBit(+waypoints.act_v.frigid_highlands);\r\n      writer.WriteBit(+waypoints.act_v.arreat_plateau);\r\n      writer.WriteBit(+waypoints.act_v.crystalline_passage);\r\n      writer.WriteBit(+waypoints.act_v.halls_of_pain);\r\n      writer.WriteBit(+waypoints.act_v.glacial_trail);\r\n      writer.WriteBit(+waypoints.act_v.frozen_tundra);\r\n      writer.WriteBit(+waypoints.act_v.the_ancients_way);\r\n      writer.WriteBit(+waypoints.act_v.worldstone_keep_lvl_2);\r\n    }\r\n  } else {\r\n    //all wps\r\n    //writer.WriteArray(new Uint8Array(5));\r\n    writer.WriteArray(new Uint8Array([0xff, 0xff, 0xff, 0xff, 0x7f]));\r\n    //_writeBits(writer, 0x3fffffffff, start, 0, 38);\r\n  }\r\n  writer.Align().WriteArray(new Uint8Array(17));\r\n  return writer.ToArray();\r\n}\r\n\r\nfunction _readNPCData(bytes: Uint8Array): types.INPCData {\r\n  const npcs = { normal: {}, nm: {}, hell: {} } as types.INPCData;\r\n  const reader = new BitReader(bytes);\r\n  for (let j = 0; j < 3; j++) {\r\n    npcs[difficulties[j]] = {\r\n      warriv_act_ii: { intro: false, congrats: false },\r\n      charsi: { intro: false, congrats: false },\r\n      warriv_act_i: { intro: false, congrats: false },\r\n      kashya: { intro: false, congrats: false },\r\n      akara: { intro: false, congrats: false },\r\n      gheed: { intro: false, congrats: false },\r\n      greiz: { intro: false, congrats: false },\r\n      jerhyn: { intro: false, congrats: false },\r\n      meshif_act_ii: { intro: false, congrats: false },\r\n      geglash: { intro: false, congrats: false },\r\n      lysnader: { intro: false, congrats: false },\r\n      fara: { intro: false, congrats: false },\r\n      drogan: { intro: false, congrats: false },\r\n      alkor: { intro: false, congrats: false },\r\n      hratli: { intro: false, congrats: false },\r\n      ashera: { intro: false, congrats: false },\r\n      cain_act_iii: { intro: false, congrats: false },\r\n      elzix: { intro: false, congrats: false },\r\n      malah: { intro: false, congrats: false },\r\n      anya: { intro: false, congrats: false },\r\n      natalya: { intro: false, congrats: false },\r\n      meshif_act_iii: { intro: false, congrats: false },\r\n      ormus: { intro: false, congrats: false },\r\n      cain_act_v: { intro: false, congrats: false },\r\n      qualkehk: { intro: false, congrats: false },\r\n      nihlathak: { intro: false, congrats: false },\r\n    } as types.INPCS;\r\n  }\r\n  //introductions\r\n  for (let i = 0; i < 3; i++) {\r\n    const j = i * 5;\r\n    const npc = npcs[difficulties[i]];\r\n    npc.warriv_act_ii.intro = reader.bits[0 + j * 8] === 1;\r\n    npc.charsi.intro = reader.bits[2 + j * 8] === 1;\r\n    npc.warriv_act_i.intro = reader.bits[3 + j * 8] === 1;\r\n    npc.kashya.intro = reader.bits[4 + j * 8] === 1;\r\n    npc.akara.intro = reader.bits[5 + j * 8] === 1;\r\n    npc.gheed.intro = reader.bits[6 + j * 8] === 1;\r\n    npc.greiz.intro = reader.bits[8 + j * 8] === 1;\r\n    npc.jerhyn.intro = reader.bits[9 + j * 8] === 1;\r\n    npc.meshif_act_ii.intro = reader.bits[10 + j * 8] === 1;\r\n    npc.geglash.intro = reader.bits[11 + j * 8] === 1;\r\n    npc.lysnader.intro = reader.bits[12 + j * 8] === 1;\r\n    npc.fara.intro = reader.bits[13 + j * 8] === 1;\r\n    npc.drogan.intro = reader.bits[14 + j * 8] === 1;\r\n    npc.alkor.intro = reader.bits[16 + j * 8] === 1;\r\n    npc.hratli.intro = reader.bits[17 + j * 8] === 1;\r\n    npc.ashera.intro = reader.bits[18 + j * 8] === 1;\r\n    npc.cain_act_iii.intro = reader.bits[21 + j * 8] === 1;\r\n    npc.elzix.intro = reader.bits[23 + j * 8] === 1;\r\n    npc.malah.intro = reader.bits[24 + j * 8] === 1;\r\n    npc.anya.intro = reader.bits[25 + j * 8] === 1;\r\n    npc.natalya.intro = reader.bits[27 + j * 8] === 1;\r\n    npc.meshif_act_iii.intro = reader.bits[28 + j * 8] === 1;\r\n    npc.ormus.intro = reader.bits[31 + j * 8] === 1;\r\n    npc.cain_act_v.intro = reader.bits[37 + j * 8] === 1;\r\n    npc.qualkehk.intro = reader.bits[38 + j * 8] === 1;\r\n    npc.nihlathak.intro = reader.bits[39 + j * 8] === 1;\r\n  }\r\n  //congrats\r\n  for (let i = 0; i < 3; i++) {\r\n    const j = i * 5;\r\n    const npc = npcs[difficulties[i]];\r\n    npc.warriv_act_ii.congrats = reader.bits[192 + (0 + j * 8)] === 1;\r\n    npc.charsi.congrats = reader.bits[192 + (2 + j * 8)] === 1;\r\n    npc.warriv_act_i.congrats = reader.bits[192 + (3 + j * 8)] === 1;\r\n    npc.kashya.congrats = reader.bits[192 + (4 + j * 8)] === 1;\r\n    npc.akara.congrats = reader.bits[192 + (5 + j * 8)] === 1;\r\n    npc.gheed.congrats = reader.bits[192 + (6 + j * 8)] === 1;\r\n    npc.greiz.congrats = reader.bits[192 + (8 + j * 8)] === 1;\r\n    npc.jerhyn.congrats = reader.bits[192 + (9 + j * 8)] === 1;\r\n    npc.meshif_act_ii.congrats = reader.bits[192 + (10 + j * 8)] === 1;\r\n    npc.geglash.congrats = reader.bits[192 + (11 + j * 8)] === 1;\r\n    npc.lysnader.congrats = reader.bits[192 + (12 + j * 8)] === 1;\r\n    npc.fara.congrats = reader.bits[192 + (13 + j * 8)] === 1;\r\n    npc.drogan.congrats = reader.bits[192 + (14 + j * 8)] === 1;\r\n    npc.alkor.congrats = reader.bits[192 + (16 + j * 8)] === 1;\r\n    npc.hratli.congrats = reader.bits[192 + (17 + j * 8)] === 1;\r\n    npc.ashera.congrats = reader.bits[192 + (18 + j * 8)] === 1;\r\n    npc.cain_act_iii.congrats = reader.bits[192 + (21 + j * 8)] === 1;\r\n    npc.elzix.congrats = reader.bits[192 + (23 + j * 8)] === 1;\r\n    npc.malah.congrats = reader.bits[192 + (24 + j * 8)] === 1;\r\n    npc.anya.congrats = reader.bits[192 + (25 + j * 8)] === 1;\r\n    npc.natalya.congrats = reader.bits[192 + (27 + j * 8)] === 1;\r\n    npc.meshif_act_iii.congrats = reader.bits[192 + (28 + j * 8)] === 1;\r\n    npc.ormus.congrats = reader.bits[192 + (31 + j * 8)] === 1;\r\n    npc.cain_act_v.congrats = reader.bits[192 + (37 + j * 8)] === 1;\r\n    npc.qualkehk.congrats = reader.bits[192 + (38 + j * 8)] === 1;\r\n    npc.nihlathak.congrats = reader.bits[192 + (39 + j * 8)] === 1;\r\n  }\r\n  return npcs;\r\n}\r\n\r\nfunction _writeNPCData(npcs: types.INPCData): Uint8Array {\r\n  const writer = new BitWriter(0x30);\r\n  writer.length = 0x30 * 8;\r\n  if (npcs) {\r\n    for (let j = 0; j < 3; j++) {\r\n      const npc = npcs[difficulties[j]];\r\n      writer.SeekByte(j * 5);\r\n      writer.WriteBit(+npc.warriv_act_ii.intro);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.charsi.intro);\r\n      writer.WriteBit(+npc.warriv_act_i.intro);\r\n      writer.WriteBit(+npc.kashya.intro);\r\n      writer.WriteBit(+npc.akara.intro);\r\n      writer.WriteBit(+npc.gheed.intro);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.greiz.intro);\r\n      writer.WriteBit(+npc.jerhyn.intro);\r\n      writer.WriteBit(+npc.meshif_act_ii.intro);\r\n      writer.WriteBit(+npc.geglash.intro);\r\n      writer.WriteBit(+npc.lysnader.intro);\r\n      writer.WriteBit(+npc.fara.intro);\r\n      writer.WriteBit(+npc.drogan.intro);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.alkor.intro);\r\n      writer.WriteBit(+npc.hratli.intro);\r\n      writer.WriteBit(+npc.ashera.intro);\r\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\r\n      writer.WriteBit(+npc.cain_act_iii.intro);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.elzix.intro);\r\n      writer.WriteBit(+npc.malah.intro);\r\n      writer.WriteBit(+npc.anya.intro);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.natalya.intro);\r\n      writer.WriteBit(+npc.meshif_act_iii.intro);\r\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\r\n      writer.WriteBit(+npc.ormus.intro);\r\n      writer.WriteBits(new Uint8Array(5).fill(0), 5);\r\n      writer.WriteBit(+npc.cain_act_v.intro);\r\n      writer.WriteBit(+npc.qualkehk.intro);\r\n      writer.WriteBit(+npc.nihlathak.intro);\r\n    }\r\n    for (let j = 0; j < 3; j++) {\r\n      writer.SeekByte(24 + j * 5);\r\n      const npc = npcs[difficulties[j]];\r\n      writer.WriteBit(+npc.warriv_act_ii.congrats);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.charsi.congrats);\r\n      writer.WriteBit(+npc.warriv_act_i.congrats);\r\n      writer.WriteBit(+npc.kashya.congrats);\r\n      writer.WriteBit(+npc.akara.congrats);\r\n      writer.WriteBit(+npc.gheed.congrats);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.greiz.congrats);\r\n      writer.WriteBit(+npc.jerhyn.congrats);\r\n      writer.WriteBit(+npc.meshif_act_ii.congrats);\r\n      writer.WriteBit(+npc.geglash.congrats);\r\n      writer.WriteBit(+npc.lysnader.congrats);\r\n      writer.WriteBit(+npc.fara.congrats);\r\n      writer.WriteBit(+npc.drogan.congrats);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.alkor.congrats);\r\n      writer.WriteBit(+npc.hratli.congrats);\r\n      writer.WriteBit(+npc.ashera.congrats);\r\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\r\n      writer.WriteBit(+npc.cain_act_iii.congrats);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.elzix.congrats);\r\n      writer.WriteBit(+npc.malah.congrats);\r\n      writer.WriteBit(+npc.anya.congrats);\r\n      writer.WriteBit(0);\r\n      writer.WriteBit(+npc.natalya.congrats);\r\n      writer.WriteBit(+npc.meshif_act_iii.congrats);\r\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\r\n      writer.WriteBit(+npc.ormus.congrats);\r\n      writer.WriteBits(new Uint8Array(5).fill(0), 5);\r\n      writer.WriteBit(+npc.cain_act_v.congrats);\r\n      writer.WriteBit(+npc.qualkehk.congrats);\r\n      writer.WriteBit(+npc.nihlathak.congrats);\r\n    }\r\n  }\r\n  return writer.ToArray();\r\n}\r\n","import * as types from \"../d2/types\";\r\n\r\n//special stats. read the next N properties.\r\n//seems to be hardcode in d2 and not in itemstatcost\r\nconst item_property_stat_count = {\r\n  item_maxdamage_percent: { numprops: 2, rangestr: \"strModMinDamageRange\", equalstr: \"strModEnhancedDamage\" },\r\n  firemindam: { numprops: 2, rangestr: \"strModFireDamageRange\", equalstr: \"strModFireDamage\" },\r\n  lightmindam: { numprops: 2, rangestr: \"strModLightningDamageRange\", equalstr: \"strModLightningDamage\" },\r\n  magicmindam: { numprops: 2, rangestr: \"strModMagicDamageRange\", equalstr: \"strModMagicDamage\" },\r\n  coldmindam: { numprops: 3, rangestr: \"strModColdDamageRange\", equalstr: \"strModColdDamage\" },\r\n  poisonmindam: { numprops: 3, rangestr: \"strModPoisonDamageRange\", equalstr: \"strModPoisonDamage\" },\r\n};\r\n\r\n//TODO use smaller field names to minimize size of file.\r\nfunction readConstantData(buffers: any): types.IConstantData {\r\n  const constants = {} as types.IConstantData;\r\n\r\n  let strings = {};\r\n  if (_hasKey(buffers, \"strings.txt\")) {\r\n    strings = _readStrings(_getKey(buffers, \"string.txt\"));\r\n    strings = Object.assign(strings, _readStrings(_getKey(buffers, \"expansionstring.txt\")));\r\n    strings = Object.assign(strings, _readStrings(_getKey(buffers, \"patchstring.txt\")));\r\n  } else {\r\n    strings = _readJSONStrings(_getKey(buffers, \"item-gems.json\"));\r\n    strings = Object.assign(strings, _readJSONStrings(_getKey(buffers, \"item-modifiers.json\")));\r\n    strings = Object.assign(strings, _readJSONStrings(_getKey(buffers, \"item-nameaffixes.json\")));\r\n    strings = Object.assign(strings, _readJSONStrings(_getKey(buffers, \"item-names.json\")));\r\n    strings = Object.assign(strings, _readJSONStrings(_getKey(buffers, \"item-runes.json\")));\r\n    strings = Object.assign(strings, _readJSONStrings(_getKey(buffers, \"skills.json\")));\r\n  }\r\n\r\n  constants.classes = _readClasses(_getArray(buffers, \"CharStats.txt\"), _getArray(buffers, \"PlayerClass.txt\"), strings);\r\n  const skillDescs = _readSkillDesc(_getArray(buffers, \"SkillDesc.txt\"), strings);\r\n  constants.skills = _readSkills(_getArray(buffers, \"skills.txt\"), skillDescs, strings);\r\n  constants.rare_names = [null].concat(_readRareNames(_getArray(buffers, \"RareSuffix.txt\"), 1, strings));\r\n  constants.rare_names = constants.rare_names.concat(\r\n    _readRareNames(_getArray(buffers, \"RarePrefix.txt\"), constants.rare_names.length, strings)\r\n  );\r\n  constants.magic_prefixes = _readMagicNames(_getArray(buffers, \"MagicPrefix.txt\"), strings);\r\n  constants.magic_suffixes = _readMagicNames(_getArray(buffers, \"MagicSuffix.txt\"), strings);\r\n  constants.properties = _readProperties(_getArray(buffers, \"Properties.txt\"), strings);\r\n  constants.magical_properties = _readItemStatCosts(_getArray(buffers, \"ItemStatCost.txt\"), strings);\r\n  constants.runewords = _readRunewords(_getArray(buffers, \"Runes.txt\"), strings, constants.skills);\r\n  constants.set_items = _readSetOrUnqItems(_getArray(buffers, \"SetItems.txt\"), strings, constants.skills);\r\n  constants.unq_items = _readSetOrUnqItems(_getArray(buffers, \"UniqueItems.txt\"), strings, constants.skills);\r\n  const item_types = _readTypes(_getArray(buffers, \"ItemTypes.txt\"), strings);\r\n  const armor_items = _readItems(_getArray(buffers, \"Armor.txt\"), item_types, strings);\r\n  const weapon_items = _readItems(_getArray(buffers, \"Weapons.txt\"), item_types, strings);\r\n  const other_items = _readItems(_getArray(buffers, \"Misc.txt\"), item_types, strings);\r\n\r\n  constants.stackables = {};\r\n  [...armor_items, ...weapon_items, ...other_items]\r\n    .filter((item) => item.s === 1)\r\n    .map((item) => (constants.stackables[item.code] = { n: item.n }));\r\n  constants.armor_items = {};\r\n  armor_items.map((item) => {\r\n    constants.armor_items[item.code] = item;\r\n    delete item.code;\r\n  });\r\n  constants.weapon_items = {};\r\n  weapon_items.map((item) => {\r\n    constants.weapon_items[item.code] = item;\r\n    delete item.code;\r\n  });\r\n  constants.other_items = {};\r\n  other_items.map((item) => {\r\n    constants.other_items[item.code] = item;\r\n    delete item.code;\r\n  });\r\n  _readGems(constants.other_items, _getArray(buffers, \"Gems.txt\"), strings);\r\n\r\n  return constants;\r\n}\r\n\r\nfunction _getArray(files: { [id: string]: Buffer }, find: string): any {\r\n  return _readTsv(_getKey(files, find));\r\n}\r\n\r\nfunction _getKey(files: { [id: string]: Buffer }, find: string): any {\r\n  const key = Object.keys(files).find((key) => key.toLowerCase() === find.toLowerCase());\r\n  if (!key) {\r\n    throw new Error(`Cannot find file: ${find}`);\r\n  }\r\n  return files[key];\r\n}\r\n\r\nfunction _hasKey(files: { [id: string]: Buffer }, find: string): boolean {\r\n  return Object.keys(files).find((key) => key.toLowerCase() === find.toLowerCase()) != null;\r\n}\r\n\r\nfunction _readTsv(file: string): any {\r\n  const lines = file.split(/\\r?\\n/).map((line) => line.split(/\\t/));\r\n  const header = lines[0];\r\n  return {\r\n    header: header,\r\n    lines: lines,\r\n  };\r\n}\r\n\r\nfunction _readStrings(file: string): any {\r\n  const result = {} as any;\r\n  file\r\n    .split(/\\r?\\n/)\r\n    .map((line) => line.split(/\\t/))\r\n    .map((line) => {\r\n      if (!result[line[0]]) {\r\n        result[line[0]] = line[1];\r\n      }\r\n    });\r\n  return result;\r\n}\r\n\r\nfunction _readJSONStrings(file: string): any {\r\n  const result = {} as any;\r\n  //remove BOM\r\n  if (file.charCodeAt(0) === 0xfeff) {\r\n    file = file.slice(1);\r\n  }\r\n  const data = JSON.parse(file);\r\n  for (const str of data) {\r\n    result[str.Key] = str.enUS;\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction _readClasses(tsv: any, tsv2: any, strings: any): any[] {\r\n  const arr = [] as any[];\r\n  const cClass = tsv.header.indexOf(\"class\");\r\n  // str\tdex\tint\tvit\ttot\tstamina\r\n  const cStr = tsv.header.indexOf(\"str\");\r\n  const cDex = tsv.header.indexOf(\"dex\");\r\n  const cInt = tsv.header.indexOf(\"int\");\r\n  const cVit = tsv.header.indexOf(\"vit\");\r\n  const cStam = tsv.header.indexOf(\"stamina\");\r\n  const cHpadd = tsv.header.indexOf(\"hpadd\");\r\n  const cLifePerLvl = tsv.header.indexOf(\"LifePerLevel\");\r\n  const cStamPerLvl = tsv.header.indexOf(\"StaminaPerLevel\");\r\n  const cManaPerLvl = tsv.header.indexOf(\"ManaPerLevel\");\r\n  const cLifePerVit = tsv.header.indexOf(\"LifePerVitality\");\r\n  const cStamPerVit = tsv.header.indexOf(\"StaminaPerVitality\");\r\n  const cManaPerMag = tsv.header.indexOf(\"ManaPerMagic\");\r\n  const cAllSkills = tsv.header.indexOf(\"StrAllSkills\");\r\n  const cSkillTab1 = tsv.header.indexOf(\"StrSkillTab1\");\r\n  const cSkillTab2 = tsv.header.indexOf(\"StrSkillTab2\");\r\n  const cSkillTab3 = tsv.header.indexOf(\"StrSkillTab3\");\r\n  const cClassOnly = tsv.header.indexOf(\"StrClassOnly\");\r\n  const cCode = tsv2.header.indexOf(\"Code\");\r\n  let id = 0;\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const clazz = tsv.lines[i][cClass];\r\n    if (clazz && clazz != \"Expansion\") {\r\n      arr[id] = {\r\n        id: id,\r\n        n: clazz,\r\n        c: tsv2.lines[i][cCode],\r\n        as: strings[tsv.lines[i][cAllSkills]],\r\n        ts: [strings[tsv.lines[i][cSkillTab1]], strings[tsv.lines[i][cSkillTab2]], strings[tsv.lines[i][cSkillTab3]]],\r\n        co: strings[tsv.lines[i][cClassOnly]],\r\n        s: {\r\n          lpl: +tsv.lines[i][cLifePerLvl],\r\n          mpl: +tsv.lines[i][cManaPerLvl],\r\n          spl: +tsv.lines[i][cStamPerLvl],\r\n          lpv: +tsv.lines[i][cLifePerVit],\r\n          spv: +tsv.lines[i][cStamPerVit],\r\n          mpe: +tsv.lines[i][cManaPerMag],\r\n        },\r\n        a: {\r\n          str: +tsv.lines[i][cStr],\r\n          dex: +tsv.lines[i][cDex],\r\n          int: +tsv.lines[i][cInt],\r\n          vit: +tsv.lines[i][cVit],\r\n          stam: +tsv.lines[i][cStam],\r\n          hpadd: tsv.lines[i][cHpadd],\r\n        },\r\n      };\r\n      id++;\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction _readSkillDesc(tsv: any, strings: any): any {\r\n  const arr = {} as any;\r\n  const cSkillDesc = tsv.header.indexOf(\"skilldesc\");\r\n  const cStrName = tsv.header.indexOf(\"str name\");\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const id = tsv.lines[i][cSkillDesc];\r\n    const skillStrName = tsv.lines[i][cStrName];\r\n    if (id && skillStrName) {\r\n      arr[id] = strings[skillStrName];\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction _readSkills(tsv: any, skillDescs: any, strings: any): any[] {\r\n  const arr = [] as any[];\r\n  const cSkill = tsv.header.indexOf(\"skill\");\r\n  const cSkillDesc = tsv.header.indexOf(\"skilldesc\");\r\n  let cId = tsv.header.indexOf(\"Id\");\r\n  if (cId < 0) {\r\n    cId = tsv.header.indexOf(\"*Id\");\r\n  }\r\n  const cCharclass = tsv.header.indexOf(\"charclass\");\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const id = +tsv.lines[i][cId];\r\n    const skillDesc = tsv.lines[i][cSkillDesc];\r\n    if (skillDesc) {\r\n      const o = {} as any;\r\n      o.id = id;\r\n      if (tsv.lines[i][cSkillDesc]) o.s = tsv.lines[i][cSkill];\r\n      if (skillDescs[skillDesc]) o.n = skillDescs[skillDesc];\r\n      if (tsv.lines[i][cCharclass]) o.c = tsv.lines[i][cCharclass];\r\n      arr[id] = o;\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction _readRareNames(tsv: any, idx: number, strings: any): any[] {\r\n  const arr = [] as any[];\r\n  const cName = tsv.header.indexOf(\"name\");\r\n  let id = idx;\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const name = tsv.lines[i][cName];\r\n    if (name) {\r\n      arr[id - idx] = {\r\n        id: id,\r\n        n: strings[name],\r\n      };\r\n      id++;\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction _readMagicNames(tsv: any, strings: any): any[] {\r\n  const arr = [] as any[];\r\n  const cName = tsv.header.indexOf(\"Name\");\r\n  const cTransformcolor = tsv.header.indexOf(\"transformcolor\");\r\n  let id = 1;\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const name = tsv.lines[i][cName];\r\n    if (name != \"Expansion\") {\r\n      const o = {} as any;\r\n      o.id = id;\r\n      o.n = strings[name];\r\n      if (tsv.lines[i][cTransformcolor]) o.tc = tsv.lines[i][cTransformcolor];\r\n      arr[id] = o;\r\n      id++;\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction _readProperties(tsv: any, strings: any): any {\r\n  const arr = {} as any;\r\n  const cCode = tsv.header.indexOf(\"code\");\r\n  const cStats = [];\r\n  for (let j = 1; j <= 7; j++) {\r\n    cStats[j] = {} as any;\r\n    cStats[j].cStat = tsv.header.indexOf(`stat${j}`);\r\n    cStats[j].cFunc = tsv.header.indexOf(`func${j}`);\r\n    cStats[j].cVal = tsv.header.indexOf(`val${j}`);\r\n  }\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const code = tsv.lines[i][cCode];\r\n    if (code != \"Expansion\") {\r\n      const prop = [];\r\n      //prop.code = code;\r\n      for (let j = 1; j <= 7; j++) {\r\n        let stat;\r\n        const func = tsv.lines[i][cStats[j].cFunc];\r\n        switch (func) {\r\n          case \"5\": {\r\n            stat = \"mindamage\";\r\n            break;\r\n          }\r\n          case \"6\": {\r\n            stat = \"maxdamage\";\r\n            break;\r\n          }\r\n          case \"7\": {\r\n            stat = \"item_maxdamage_percent\";\r\n            break;\r\n          }\r\n          case \"20\": {\r\n            stat = \"item_indesctructible\";\r\n            break;\r\n          }\r\n          case \"23\": {\r\n            stat = \"ethereal\"\r\n            break;\r\n          }\r\n          default: {\r\n            stat = tsv.lines[i][cStats[j].cStat];\r\n            break;\r\n          }\r\n        }\r\n        const val = tsv.lines[i][cStats[j].cVal];\r\n        if (!stat && !func) {\r\n          break;\r\n        }\r\n        const s = {} as any;\r\n        if (stat) s.s = stat;\r\n        if (func) s.f = +func;\r\n        if (val) s.val = +val;\r\n        prop[j - 1] = s;\r\n      }\r\n      if (prop.length) {\r\n        arr[code] = prop;\r\n      }\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction _readRunewords(tsv: any, strings: any, skills: any[]): any[] {\r\n  const arr = [] as any[];\r\n  const cName = tsv.header.indexOf(\"Name\");\r\n  const cComplete = tsv.header.indexOf(\"complete\");\r\n  const types = [];\r\n  for (let i = 1; i < 7; i++) {\r\n    types.push(tsv.header.indexOf(`itype${i}`))\r\n  }\r\n  const runes = [];\r\n  for (let i = 1; i < 7; i++) {\r\n    runes.push(tsv.header.indexOf(`Rune${i}`));\r\n  }\r\n  const modifiers = [] as any;\r\n  for (let i = 1; i < 12; i++) {\r\n    modifiers[i] = [];\r\n    modifiers[i].cMod = tsv.header.indexOf(`T1Code${i}`);\r\n    modifiers[i].cParam = tsv.header.indexOf(`T1Param${i}`);\r\n    modifiers[i].cMin = tsv.header.indexOf(`T1Min${i}`);\r\n    modifiers[i].cMax = tsv.header.indexOf(`T1Max${i}`);\r\n  }\r\n\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const name = tsv.lines[i][cName];\r\n    const enabled = tsv.lines[i][cComplete];\r\n    const o = {} as any;\r\n    if (enabled) {\r\n      let id = +name.substring(8);\r\n      //TODO: why?\r\n      if (id > 75) {\r\n        id += 25;\r\n      } else {\r\n        id += 26;\r\n      }\r\n\r\n      o.id = id;\r\n      o.n = strings[tsv.lines[i][cName]];\r\n      const t = [];\r\n      for (let j = 0; j <= 6; j++ ) {\r\n        const type = tsv.lines[i][types[j]];\r\n        if (!type) {\r\n          break;\r\n        }\r\n        t[j] = type;\r\n      }\r\n      o.types = t;\r\n      const r = [];\r\n      for (let j = 0; j <= 6; j++) {\r\n        const rune = tsv.lines[i][runes[j]];\r\n        if (!rune) {\r\n          break;\r\n        }\r\n        r[j] = rune;\r\n      }\r\n      o.r = r;\r\n\r\n      o.m = [];\r\n      const s = skills.filter(s => s && s.s);\r\n      for (let j = 1; j < 12; j++) {\r\n        const mod = tsv.lines[i][modifiers[j].cMod];\r\n        if (!mod) {\r\n          break;\r\n        }\r\n        const m = {} as any;\r\n        m.prop = mod;\r\n        let param = Number(+tsv.lines[i][modifiers[j].cParam]);\r\n        //string value\r\n        if (Number.isNaN(param)) {\r\n          param = s.find(s => s.s == tsv.lines[i][modifiers[j].cParam])?.id;\r\n        }\r\n        if (tsv.lines[i][modifiers[j].cParam]) m.p = param;\r\n        if (tsv.lines[i][modifiers[j].cMin]) m.min = +tsv.lines[i][modifiers[j].cMin];\r\n        if (tsv.lines[i][modifiers[j].cMax]) m.max = +tsv.lines[i][modifiers[j].cMax];\r\n        o.m.push(m);\r\n      }\r\n\r\n      arr[id] = o;\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction _readTypes(tsv: any, strings: any): any {\r\n  const arr = {} as any;\r\n  const cCode = tsv.header.indexOf(\"Code\");\r\n  const cItemType = tsv.header.indexOf(\"ItemType\");\r\n  const cEquiv1 = tsv.header.indexOf(\"Equiv1\");\r\n  const cEquiv2 = tsv.header.indexOf(\"Equiv2\");\r\n  const cInvGfx = [];\r\n  for (let i = 1; i <= 6; i++) {\r\n    cInvGfx.push(tsv.header.indexOf(`InvGfx${i}`));\r\n  }\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const code = tsv.lines[i][cCode];\r\n    if (code) {\r\n      const o = {} as any;\r\n      const invgfx = [];\r\n      for (let j = 0; j <= 6; j++) {\r\n        if (tsv.lines[i][cInvGfx[j]]) invgfx[j] = tsv.lines[i][cInvGfx[j]];\r\n      }\r\n      o.ig = invgfx;\r\n      o.eq1 = tsv.lines[i][cEquiv1];\r\n      o.eq2 = tsv.lines[i][cEquiv2];\r\n      o.n = tsv.lines[i][cItemType];\r\n      o.c = [o.n];\r\n      arr[code] = o;\r\n    }\r\n  }\r\n\r\n  for (const k of Object.keys(arr)) {\r\n    arr[k].c = [..._resolvetItemTypeCategories(arr, k)];\r\n    if (arr[k] !== undefined && arr[arr[k].eq1] !== undefined) {\r\n      arr[k].eq1n = arr[arr[k].eq1].n;\r\n    }\r\n\r\n    if (arr[k] !== undefined && arr[arr[k].eq2] !== undefined) {\r\n      arr[k].eq2n = arr[arr[k].eq2].n;\r\n    }\r\n  }\r\n\r\n  return arr;\r\n}\r\n\r\nfunction _resolvetItemTypeCategories(arr: any, key: string) {\r\n  let res: string[] = [];\r\n  if (arr[key] !== undefined) {\r\n    res = [arr[key].n, ..._resolvetItemTypeCategories(arr, arr[key].eq1), ..._resolvetItemTypeCategories(arr, arr[key].eq2)];\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction _readItems(tsv: any, itemtypes: any, strings: any): any[] {\r\n  const arr = [] as any[];\r\n  const cCode = tsv.header.indexOf(\"code\");\r\n  const cNameStr = tsv.header.indexOf(\"namestr\");\r\n  const cStackable = tsv.header.indexOf(\"stackable\");\r\n  const cMinac = tsv.header.indexOf(\"minac\");\r\n  const cMaxac = tsv.header.indexOf(\"maxac\");\r\n  const cDurability = tsv.header.indexOf(\"durability\");\r\n  const cMindam = tsv.header.indexOf(\"mindam\");\r\n  const cMaxdam = tsv.header.indexOf(\"maxdam\");\r\n  const cTwoHandMindam = tsv.header.indexOf(\"2handmindam\");\r\n  const cTwoHandMaxdam = tsv.header.indexOf(\"2handmaxdam\");\r\n  const cMinmisdam = tsv.header.indexOf(\"minmisdam\");\r\n  const cMaxmisdam = tsv.header.indexOf(\"maxmisdam\");\r\n  const cReqstr = tsv.header.indexOf(\"reqstr\");\r\n  const cReqdex = tsv.header.indexOf(\"reqdex\");\r\n  const cHasinv = tsv.header.indexOf(\"hasinv\");\r\n  const cGemapplytype = tsv.header.indexOf(\"gemapplytype\");\r\n  const cInvfile = tsv.header.indexOf(\"invfile\");\r\n  const cUniqueInvfile = tsv.header.indexOf(\"uniqueinvfile\");\r\n  const cSetInvfile = tsv.header.indexOf(\"setinvfile\");\r\n  const cInvwidth = tsv.header.indexOf(\"invwidth\");\r\n  const cInvheight = tsv.header.indexOf(\"invheight\");\r\n  const cInvtransform = tsv.header.indexOf(\"InvTrans\");\r\n  const cType = tsv.header.indexOf(\"type\");\r\n  const cNormCode = tsv.header.indexOf(\"normcode\");\r\n  const cUberCode = tsv.header.indexOf(\"ubercode\");\r\n  const cUltraCode = tsv.header.indexOf(\"ultracode\");\r\n  const cGemSockets = tsv.header.indexOf(\"gemsockets\");\r\n  const cSpawnable = tsv.header.indexOf(\"spawnable\");\r\n  const cOneOrTwoHadned = tsv.header.indexOf(\"1or2handed\");\r\n  const cTwoHanded = tsv.header.indexOf(\"2handed\");\r\n  const cNodurability = tsv.header.indexOf(\"nodurability\");\r\n\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const code = tsv.lines[i][cCode];\r\n    if (code) {\r\n      const item = {} as any;\r\n      item.code = code;\r\n      item.nc = tsv.lines[i][cNormCode];\r\n      item.exc = tsv.lines[i][cUberCode];\r\n      item.elc = tsv.lines[i][cUltraCode];\r\n      item.iq =\r\n        item.code === item.exc\r\n          ? types.EItemQuality.exceptional\r\n          : item.code === item.elc\r\n          ? types.EItemQuality.elite\r\n          : types.EItemQuality.normal;\r\n      item.n = strings[tsv.lines[i][cNameStr]];\r\n      if (tsv.lines[i][cStackable] && +tsv.lines[i][cStackable] > 0) item.s = 1;\r\n      if (tsv.lines[i][cMinac] && +tsv.lines[i][cMinac] > 0) item.minac = +tsv.lines[i][cMinac];\r\n      if (tsv.lines[i][cMaxac] && +tsv.lines[i][cMaxac] > 0) item.maxac = +tsv.lines[i][cMaxac];\r\n      if (tsv.lines[i][cDurability]) item.durability = +tsv.lines[i][cDurability];\r\n      if (tsv.lines[i][cMindam] && +tsv.lines[i][cMindam] > 0) item.mind = +tsv.lines[i][cMindam];\r\n      if (tsv.lines[i][cMaxdam] && +tsv.lines[i][cMaxdam] > 0) item.maxd = +tsv.lines[i][cMaxdam];\r\n      if (tsv.lines[i][cTwoHandMindam] && +tsv.lines[i][cTwoHandMindam] > 0) item.min2d = +tsv.lines[i][cTwoHandMindam];\r\n      if (tsv.lines[i][cTwoHandMaxdam] && +tsv.lines[i][cTwoHandMaxdam] > 0) item.max2d = +tsv.lines[i][cTwoHandMaxdam];\r\n      if (tsv.lines[i][cMinmisdam] && +tsv.lines[i][cMinmisdam] > 0) item.minmd = +tsv.lines[i][cMinmisdam];\r\n      if (tsv.lines[i][cMaxmisdam] && +tsv.lines[i][cMaxmisdam] > 0) item.maxmd = +tsv.lines[i][cMaxmisdam];\r\n      if (tsv.lines[i][cReqstr]) item.rs = +tsv.lines[i][cReqstr];\r\n      if (tsv.lines[i][cReqdex]) item.rd = +tsv.lines[i][cReqdex];\r\n      if (tsv.lines[i][cHasinv]) item.hi = +tsv.lines[i][cHasinv];\r\n      if (tsv.lines[i][cGemapplytype]) item.gt = +tsv.lines[i][cGemapplytype];\r\n      if (tsv.lines[i][cInvfile]) item.i = tsv.lines[i][cInvfile];\r\n      if (tsv.lines[i][cUniqueInvfile]) item.ui = tsv.lines[i][cUniqueInvfile];\r\n      if (tsv.lines[i][cSetInvfile]) item.si = tsv.lines[i][cSetInvfile];\r\n      if (tsv.lines[i][cInvwidth]) item.iw = +tsv.lines[i][cInvwidth];\r\n      if (tsv.lines[i][cInvheight]) item.ih = +tsv.lines[i][cInvheight];\r\n      if (tsv.lines[i][cInvtransform]) item.it = +tsv.lines[i][cInvtransform];\r\n      if (tsv.lines[i][cType]) item.type = tsv.lines[i][cType];\r\n      if (tsv.lines[i][cGemSockets]) {item.gemsockets = +tsv.lines[i][cGemSockets]} else {item.gemsockets = 0};\r\n      if (tsv.lines[i][cSpawnable]) item.spawnable = +tsv.lines[i][cSpawnable];\r\n      if (tsv.lines[i][cOneOrTwoHadned]) item.handed1or2 = +tsv.lines[i][cOneOrTwoHadned];\r\n      if (tsv.lines[i][cTwoHanded]) item.handed2 = +tsv.lines[i][cTwoHanded];\r\n      if (tsv.lines[i][cNodurability]) item.nodurability = +tsv.lines[i][cNodurability];\r\n\r\n      const type = itemtypes[tsv.lines[i][cType]];\r\n      if (type && type.ig) {\r\n        item.ig = type.ig;\r\n        item.eq1n = type.eq1n;\r\n        item.eq2n = type.eq2n;\r\n        item.c = type.c;\r\n      }\r\n      arr.push(item);\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction _readGems(miscItems: any, tsv: any, strings: any) {\r\n  const cCode = tsv.header.indexOf(\"code\");\r\n  const types = [\"weapon\", \"helm\", \"shield\"];\r\n  const cols = {} as any;\r\n  for (const type of types) {\r\n    cols[type] = [];\r\n    for (let j = 1; j <= 3; j++) {\r\n      cols[type][j] = {} as any;\r\n      cols[type][j].cMod = tsv.header.indexOf(`${type}Mod${j}Code`);\r\n      cols[type][j].cParam = tsv.header.indexOf(`${type}Mod${j}Param`);\r\n      cols[type][j].cMin = tsv.header.indexOf(`${type}Mod${j}Min`);\r\n      cols[type][j].cMax = tsv.header.indexOf(`${type}Mod${j}Max`);\r\n    }\r\n  }\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const code = tsv.lines[i][cCode];\r\n    if (code && code != \"Expansion\") {\r\n      const item = miscItems[code];\r\n      // const row = {\r\n      //   weapon: [],\r\n      //   helm: [],\r\n      //   shield: [],\r\n      // };\r\n      for (let k = 0; k < 3; k++) {\r\n        const type = types[k];\r\n        //const m = {} as any;\r\n        for (let j = 1; j <= 3; j++) {\r\n          const mod = tsv.lines[i][cols[type][j].cMod];\r\n          if (!mod) {\r\n            break;\r\n          }\r\n          if (j == 1) {\r\n            if (!item.m) item.m = [];\r\n            item.m[k] = [];\r\n          }\r\n          const m = {} as any;\r\n          m.prop = mod;\r\n          if (tsv.lines[i][cols[type][j].cParam]) m.p = +tsv.lines[i][cols[type][j].cParam];\r\n          if (tsv.lines[i][cols[type][j].cMin]) m.min = +tsv.lines[i][cols[type][j].cMin];\r\n          if (tsv.lines[i][cols[type][j].cMax]) m.max = +tsv.lines[i][cols[type][j].cMax];\r\n          item.m[k].push(m);\r\n        }\r\n        //row[type].push(m);\r\n      }\r\n      //item.m = row;\r\n    }\r\n  }\r\n}\r\n\r\nfunction _readSetOrUnqItems(tsv: any, strings: any, skills : any[]): any[] {\r\n  const arr = [] as any[];\r\n  const cIndex = tsv.header.indexOf(\"index\");\r\n  const cInvfile = tsv.header.indexOf(\"invfile\");\r\n  let cCode = tsv.header.indexOf(\"code\");\r\n  if (cCode < 0) cCode = tsv.header.indexOf(\"item\");\r\n  const cInvtransform = tsv.header.indexOf(\"invtransform\");\r\n  const cLvl = tsv.header.indexOf(\"lvl\");\r\n  const modifiers = [] as any;\r\n  for (let i = 1; i < 12; i++) {\r\n    modifiers[i] = [];\r\n    modifiers[i].cMod = tsv.header.indexOf(`prop${i}`);\r\n    modifiers[i].cParam = tsv.header.indexOf(`par${i}`);\r\n    modifiers[i].cMin = tsv.header.indexOf(`min${i}`);\r\n    modifiers[i].cMax = tsv.header.indexOf(`max${i}`);\r\n  }\r\n\r\n  let id = 0;\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    const index = tsv.lines[i][cIndex];\r\n    if (index && index != \"Expansion\") {\r\n      const o = {} as any;\r\n      o.id = id;\r\n      o.n = strings[tsv.lines[i][cIndex]];\r\n      if (tsv.lines[i][cInvfile]) o.i = tsv.lines[i][cInvfile];\r\n      if (tsv.lines[i][cCode]) o.c = tsv.lines[i][cCode];\r\n      if (tsv.lines[i][cInvtransform]) o.tc = tsv.lines[i][cInvtransform];\r\n      if (tsv.lines[i][cLvl]) o.lvl = tsv.lines[i][cLvl];\r\n      o.m = [];\r\n      for (let j = 1; j < 12; j++) {\r\n        const mod = tsv.lines[i][modifiers[j].cMod];\r\n        if (!mod) {\r\n          break;\r\n        }\r\n        const m = {} as any;\r\n        m.prop = mod;\r\n        let param = Number(+tsv.lines[i][modifiers[j].cParam]);\r\n        if (Number.isNaN(param)) {\r\n          param = skills\r\n          .filter(s => s && s.s)\r\n          .find(s => s.s == tsv.lines[i][modifiers[j].cParam])?.id;\r\n        }\r\n        if (tsv.lines[i][modifiers[j].cParam]) m.p = param;\r\n        if (tsv.lines[i][modifiers[j].cMin]) m.min = +tsv.lines[i][modifiers[j].cMin];\r\n        if (tsv.lines[i][modifiers[j].cMax]) m.max = +tsv.lines[i][modifiers[j].cMax];\r\n        o.m.push(m);\r\n      }\r\n      arr[id] = o;\r\n      id++;\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction _readItemStatCosts(tsv: any, strings: any): any[] {\r\n  const arr = [] as any[];\r\n  const cStat = tsv.header.indexOf(\"Stat\");\r\n  let cId = tsv.header.indexOf(\"ID\");\r\n  if (cId < 0) {\r\n    cId = tsv.header.indexOf(\"*ID\");\r\n  }\r\n  const cCSvBits = tsv.header.indexOf(\"CSvBits\");\r\n  const cCSvParam = tsv.header.indexOf(\"CSvParam\");\r\n  const cCSvSigned = tsv.header.indexOf(\"CSvSigned\");\r\n  const cEncode = tsv.header.indexOf(\"Encode\");\r\n  const cValShift = tsv.header.indexOf(\"ValShift\");\r\n  const cSigned = tsv.header.indexOf(\"Signed\");\r\n  const cSaveBits = tsv.header.indexOf(\"Save Bits\");\r\n  const cSaveAdd = tsv.header.indexOf(\"Save Add\");\r\n  const cSaveParamBits = tsv.header.indexOf(\"Save Param Bits\");\r\n  const cDescPriority = tsv.header.indexOf(\"descpriority\");\r\n  const cDescFunc = tsv.header.indexOf(\"descfunc\");\r\n  const cDescVal = tsv.header.indexOf(\"descval\");\r\n  const cDescstrpos = tsv.header.indexOf(\"descstrpos\");\r\n  const cDescstrneg = tsv.header.indexOf(\"descstrneg\");\r\n  const cDescstr2 = tsv.header.indexOf(\"descstr2\");\r\n  const cDgrp = tsv.header.indexOf(\"dgrp\");\r\n  const cDgrpFunc = tsv.header.indexOf(\"dgrpfunc\");\r\n  const cDgrpVal = tsv.header.indexOf(\"dgrpval\");\r\n  const cDgrpstrpos = tsv.header.indexOf(\"dgrpstrpos\");\r\n  const cDgrpstrneg = tsv.header.indexOf(\"dgrpstrneg\");\r\n  const cDgrpstr2 = tsv.header.indexOf(\"dgrpstr2\");\r\n  const cOp = tsv.header.indexOf(\"op\");\r\n  const cOpParam = tsv.header.indexOf(\"op param\");\r\n  const cOpBase = tsv.header.indexOf(\"op base\");\r\n  const cOpStat1 = tsv.header.indexOf(\"op stat1\");\r\n  const cOpStat2 = tsv.header.indexOf(\"op stat2\");\r\n  const cOpStat3 = tsv.header.indexOf(\"op stat3\");\r\n  let id = 0;\r\n  for (let i = 1; i < tsv.lines.length; i++) {\r\n    //const id = +tsv.lines[i][cId];\r\n    const stat = tsv.lines[i][cStat];\r\n    if (stat) {\r\n      const o = {} as any;\r\n      o.id = id;\r\n      o.s = stat;\r\n      if (tsv.lines[i][cCSvBits]) o.cB = +tsv.lines[i][cCSvBits];\r\n      if (tsv.lines[i][cCSvParam]) o.cP = +tsv.lines[i][cCSvParam];\r\n      if (tsv.lines[i][cCSvSigned]) o.cS = +tsv.lines[i][cCSvSigned];\r\n      if (tsv.lines[i][cEncode]) o.e = +tsv.lines[i][cEncode];\r\n      if (tsv.lines[i][cValShift]) o.vS = +tsv.lines[i][cValShift];\r\n      if (tsv.lines[i][cSigned]) o.sS = +tsv.lines[i][cSigned];\r\n      if (tsv.lines[i][cSaveBits]) o.sB = +tsv.lines[i][cSaveBits];\r\n      if (tsv.lines[i][cSaveAdd]) o.sA = +tsv.lines[i][cSaveAdd];\r\n      if (tsv.lines[i][cSaveParamBits]) o.sP = +tsv.lines[i][cSaveParamBits];\r\n      if (tsv.lines[i][cDescPriority]) o.so = +tsv.lines[i][cDescPriority];\r\n      if (tsv.lines[i][cDescFunc]) o.dF = +tsv.lines[i][cDescFunc];\r\n      if (tsv.lines[i][cDescVal]) o.dV = +tsv.lines[i][cDescVal];\r\n      if (tsv.lines[i][cDescstrpos]) o.dP = strings[tsv.lines[i][cDescstrpos]];\r\n      if (tsv.lines[i][cDescstrneg]) o.dN = strings[tsv.lines[i][cDescstrneg]];\r\n      if (tsv.lines[i][cDescstr2]) o.d2 = strings[tsv.lines[i][cDescstr2]];\r\n      if (tsv.lines[i][cDgrp]) o.dg = +tsv.lines[i][cDgrp];\r\n      if (tsv.lines[i][cDgrpFunc]) o.dgF = +tsv.lines[i][cDgrpFunc];\r\n      if (tsv.lines[i][cDgrpVal]) o.dgV = +tsv.lines[i][cDgrpVal];\r\n      if (tsv.lines[i][cDgrpstrpos]) o.dgP = strings[tsv.lines[i][cDgrpstrpos]];\r\n      if (tsv.lines[i][cDgrpstrneg]) o.dN = strings[tsv.lines[i][cDgrpstrneg]];\r\n      if (tsv.lines[i][cDgrpstr2]) o.dg2 = strings[tsv.lines[i][cDgrpstr2]];\r\n      if (tsv.lines[i][cOp]) o.o = +tsv.lines[i][cOp];\r\n      if (tsv.lines[i][cOpParam]) o.op = +tsv.lines[i][cOpParam];\r\n      if (tsv.lines[i][cOpBase]) o.ob = tsv.lines[i][cOpBase];\r\n      if (tsv.lines[i][cOpStat1]) o.os = [tsv.lines[i][cOpStat1]];\r\n      if (tsv.lines[i][cOpStat2]) o.os[1] = tsv.lines[i][cOpStat2];\r\n      if (tsv.lines[i][cOpStat3]) o.os[2] = tsv.lines[i][cOpStat3];\r\n\r\n      const dmgstatrange = item_property_stat_count[stat];\r\n      if (dmgstatrange) {\r\n        o.np = dmgstatrange.numprops;\r\n        o.dR = strings[dmgstatrange.rangestr];\r\n        o.dE = strings[dmgstatrange.equalstr];\r\n      }\r\n      arr[id] = o;\r\n      id++;\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport { readConstantData };\r\n","export * from \"./d2/d2s\";\r\nexport { readHeader, readHeaderData, writeHeader, writeHeaderData, fixHeader } from \"./d2/header\";\r\nexport { readAttributes, writeAttributes } from \"./d2/attributes\";\r\nexport { readSkills, writeSkills } from \"./d2/skills\";\r\nexport { enhanceAttributes, enhanceItems, enhanceItem, enhancePlayerAttributes, compactAttributes } from \"./d2/attribute_enhancer\";\r\nexport { getConstantData, setConstantData } from \"./d2/constants\";\r\nexport * from \"./data/parser\";\r\nexport * as types from \"./d2/types\";\r\n"],"sourceRoot":""}